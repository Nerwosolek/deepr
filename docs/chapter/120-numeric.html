<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta content="Deep R Programming" name="citation_title" />
<meta content="Marek Gagolewski" name="citation_author" />
<meta content="2023" name="citation_date" />
<meta content="2023" name="citation_publication_date" />
<meta content="https://deepr.gagolewski.com/deepr.pdf" name="citation_pdf_url" />
<meta content="https://deepr.gagolewski.com" name="citation_public_url" />
<meta content="10.5281/zenodo.7490464" name="citation_doi" />
<meta content="Deep R Programming is comprehensive course on one of the most popular languages in data science (statistical computing, graphics, machine learning, data wrangling and analytics). It introduces the base language in-depth and is aimed at ambitious students, practitioners, and researchers who would like to become independent users of this powerful environment. This textbook is a non-profit project. Its online and PDF versions are freely available at https://deepr.gagolewski.com/." name="citation_abstract" />
<meta content="summary" name="twitter:card" />
<meta content="Deep R Programming" name="twitter:title" />
<meta content="Deep R Programming" name="og:title" />
<meta content="Deep R Programming is comprehensive course on one of the most popular languages in data science (statistical computing, graphics, machine learning, data wrangling and analytics). It introduces the base language in-depth and is aimed at ambitious students, practitioners, and researchers who would like to become independent users of this powerful environment. This textbook is a non-profit project. Its online and PDF versions are freely available at https://deepr.gagolewski.com/." name="twitter:description" />
<meta content="Deep R Programming is comprehensive course on one of the most popular languages in data science (statistical computing, graphics, machine learning, data wrangling and analytics). It introduces the base language in-depth and is aimed at ambitious students, practitioners, and researchers who would like to become independent users of this powerful environment. This textbook is a non-profit project. Its online and PDF versions are freely available at https://deepr.gagolewski.com/." name="og:description" />
<meta content="gagolews/deepr" name="og:site_name" />
<meta content="https://deepr.gagolewski.com" name="og:url" />
<meta content="https://deepr.gagolewski.com/_images/cover.png" name="twitter:image" />
<meta content="https://deepr.gagolewski.com/_images/cover.png" name="og:image" />
<meta content="https://deepr.gagolewski.com" name="DC.identifier" />
<meta content="Marek Gagolewski" name="DC.publisher" />
<meta content="INDEX,FOLLOW" name="robots" />
<meta content="book" name="og:type" />
<meta content="9780645571929" name="og:book:isbn" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="3. Logical vectors" href="130-logical.html" /><link rel="prev" title="1. Introduction" href="110-basics.html" />
        <link rel="canonical" href="https://deepr.gagolewski.com/chapter/120-numeric.html" />

    <link rel="shortcut icon" href="../_static/favicon.png"/><!-- Generated with Sphinx 5.3.0 and Furo 2022.12.07 -->
        <title>2. Numeric vectors - Deep R Programming</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=91d0f0d1c444bdcb17a68e833c7a53903343c195" />
    <link rel="stylesheet" type="text/css" href="../_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 95%;
  --admonition-title-font-size: 95%;
  --color-brand-primary: red;
  --color-brand-content: #CC3333;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --admonition-font-size: 95%;
  --admonition-title-font-size: 95%;
  --color-brand-primary: #ff2b53;
  --color-brand-content: #dd3333;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --admonition-font-size: 95%;
  --admonition-title-font-size: 95%;
  --color-brand-primary: #ff2b53;
  --color-brand-content: #dd3333;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Deep R Programming</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto colour theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky">

<span class="sidebar-brand-text">
<a class="sidebar-brand" href="../index.html">Deep R Programming</a>
</span>
<div class="sidebar-brand">
An open-access textbook<br />
by <a href='https://www.gagolewski.com' style="display: contents">Marek Gagolewski</a><br />
v0.2.0.9001 (draft)
</div>
<form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">About</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.gagolewski.com/">Author</a></li>
<li class="toctree-l1"><a class="reference external" href="https://deepr.gagolewski.com/deepr.pdf">This Book in PDF</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/deepr/">Report Bugs or Typos (GitHub)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/gagolews/teaching-data">Datasets</a></li>
<li class="toctree-l1"><a class="reference external" href="https://datawranglingpy.gagolewski.com">Data Wrangling with Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Start Here</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="000-preface.html">Preface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deep</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="110-basics.html">1. Introduction</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">2. Numeric vectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="130-logical.html">3. Logical vectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="140-list.html">4. Lists and attributes</a></li>
<li class="toctree-l1"><a class="reference internal" href="150-indexing.html">5. Vector indexing</a></li>
<li class="toctree-l1"><a class="reference internal" href="160-character.html">6. Character vectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="170-function.html">7. Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="180-flow.html">8. Flow of execution</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deeper</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="210-design.html">9. Designing functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="220-s3.html">10. S3 classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="230-matrix.html">11. Matrices and other arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="240-data-frame.html">12. Data frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="250-graphics.html">13. 🚧🚧 Graphics</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deepest</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="310-compiled.html">14. 🚧🚧 Interfacing compiled code (*)</a></li>
<li class="toctree-l1"><a class="reference internal" href="320-language.html">15. Unevaluated expressions (*)</a></li>
<li class="toctree-l1"><a class="reference internal" href="330-environment.html">16. Environments and evaluation (*)</a></li>
<li class="toctree-l1"><a class="reference internal" href="340-lazy.html">17. Lazy evaluation (**)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="998-changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="999-bibliography.html">References</a></li>
</ul>

</div></div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/gagolews/deepr/issues/" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto colour theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section class="tex2jax_ignore mathjax_ignore" id="numeric-vectors">
<span id="chap-numeric"></span><h1><span class="section-number">2. </span>Numeric vectors<a class="headerlink" href="#numeric-vectors" title="Permalink to this heading">#</a></h1>
<blockquote>
<div><p><em>The open-access textbook</em>
Deep R Programming <em>by <a class="reference external" href="https://www.gagolewski.com">Marek Gagolewski</a>
is, and will remain, freely available for everyone’s enjoyment
(also in <a class="reference external" href="https://deepr.gagolewski.com/deepr.pdf">PDF</a>).
It is a non-profit project.</em>
<strong>This book is still a work in progress.</strong> <em>Beta versions
of Chapters 1–12 and 15–17 are already complete (copyediting still pending),
but there will be more. In the meantime,</em> <strong>any
<a class="reference external" href="https://github.com/gagolews/deepr/issues">bug/typos reports/fixes</a>
are appreciated.</strong>
<em>Although available online, it is a whole course;
it should be read from the beginning to the end.
Refer to the <a class="reference internal" href="000-preface.html#chap-preface"><span class="std std-ref">Preface</span></a> for general introductory remarks.</em>
<em>Also, check out my other book,
<a class="reference external" href="https://datawranglingpy.gagolewski.com/"><em>Minimalist Data Wrangling with Python</em></a>
<span id="id1">[<a class="reference internal" href="999-bibliography.html#id3" title="Gagolewski, M. (2022).  Minimalist Data Wrangling with Python. Zenodo, Melbourne. URL: https://datawranglingpy.gagolewski.com/, DOI: 10.5281/zenodo.6451068.">25</a>]</span>.</em></p>
</div></blockquote>
<p>In this chapter, we discuss the uttermost common operations
on numeric vectors. They are so fundamental that we will also find them
in other scientific computing environments, including Python
with <strong class="program">NumPy</strong> or <strong class="program">TensorFlow</strong>,
Julia, MATLAB, GNU Octave, or Scilab.</p>
<p>At first blush, the number of functions we are going
to explore may seem quite large. Still, the reader is
kindly asked to place some trust (a rare thing these days)
in yours truly. It is because our selection is comprised only of the most
representative and educational amongst the plethora of possible choices.
More complex building blocks can either be reduced to a creative combination
of the former or be easily found – should the need arise –
in a number additional packages or libraries
(e.g., the GNU GSL <span id="id2">[<a class="reference internal" href="999-bibliography.html#id29" title="Galassi, M., Theiler, J., and et al. (2021).  GNU Scientific Library Reference Manual. URL: https://www.gnu.org/software/gsl/.">27</a>]</span>).</p>
<p>A solid understanding of base R programming is necessary for the
effective dealing with the popular packages
(such as <strong class="program">data.table</strong>, <strong class="program">dplyr</strong>,
or <strong class="program">caret</strong>). Most importantly, base R’s API is <em>stable</em>,
hence the code we write today will most likely work the same way in 10 years.
This is often not the case when we rely on third-party add-ons.</p>
<p>In the sequel, we will be advocating a minimalist, keep-it-simple approach
to the art of programming of data processing pipelines,
one that is a good balance between “doing it all by oneself”,
“minimising the information overload”, “being lazy”,
and “standing on the shoulders of giants”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The exercises that we suggest below are all self-contained, unless explicitly
stated otherwise. The use of language constructs that are yet to be formally
introduced (in particular, <strong class="command">if</strong>, <strong class="command">for</strong>,
and <strong class="command">while</strong> which we will explain in <a class="reference internal" href="180-flow.html#chap-flow"><span class="std std-numref">Chapter 8</span></a>)
is not only unnecessary, but discouraged.
Moreover, we recommend against taking shortcuts
by looking up partial solutions on the internet.
Rather, to get the most out of this course,
the reader should be seeking relevant information within the current and
preceding chapters as well as the R help system.</p>
</div>
<section id="creating-numeric-vectors">
<h2><span class="section-number">2.1. </span>Creating numeric vectors<a class="headerlink" href="#creating-numeric-vectors" title="Permalink to this heading">#</a></h2>
<section id="numeric-constants">
<h3><span class="section-number">2.1.1. </span>Numeric constants<a class="headerlink" href="#numeric-constants" title="Permalink to this heading">#</a></h3>
<p>The simplest numeric vectors are those of length one:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="m">-3.14</span>
<span class="c1">## [1] -3.14</span>
<span class="m">1.23e-4</span>
<span class="c1">## [1] 0.000123</span>
</pre></div>
</div>
<p>The latter is in what we call the <em>scientific notation</em>
which is convenient means of entering numbers of very
large or small order of magnitude.
Here, “<code class="docutils literal notranslate"><span class="pre">e</span></code>” stands for “… times 10 to the power of…”.
Therefore, <code class="docutils literal notranslate"><span class="pre">1.23e-4</span></code> is equal to <span class="math notranslate nohighlight">\(1.23\times 10^{-4}=0.000123\)</span>.
In other words, given <span class="math notranslate nohighlight">\(1.23\)</span>, we move the decimal separator by
4 digits towards the left.</p>
<p>In real life, some information items
may be inherently or temporarily missing, unknown, or <code class="docutils literal notranslate"><span class="pre">N</span></code>ot <code class="docutils literal notranslate"><span class="pre">A</span></code>vailable.
R is data processing-oriented, hence it is equipped with
a special indicator:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="kc">NA_real_</span><span class="w">  </span><span class="c1"># numeric NA (missing value)</span>
<span class="c1">## [1] NA</span>
</pre></div>
</div>
<p>This is similar to the <em>Null</em> marker in database query languages
such as SQL. Note that <code class="docutils literal notranslate"><span class="pre">NA_real_</span></code>
is displayed simply as “<code class="docutils literal notranslate"><span class="pre">NA</span></code>”, chiefly for readability.</p>
<p>Moreover, <code class="docutils literal notranslate"><span class="pre">Inf</span></code> denotes the infinity (<span class="math notranslate nohighlight">\(\infty\)</span>; a value that is
larger than the largest representable double precision
– 64 bit – floating point number)
and <code class="docutils literal notranslate"><span class="pre">NaN</span></code> stands for <em>not-a-number</em> (it is returned as the result
of some illegal operations, e.g., <span class="math notranslate nohighlight">\(0/0\)</span> or <span class="math notranslate nohighlight">\(\infty-\infty\)</span>).</p>
</section>
<section id="concatenating-vectors-with-c">
<h3><span class="section-number">2.1.2. </span>Concatenating vectors with <strong class="command">c</strong><a class="headerlink" href="#concatenating-vectors-with-c" title="Permalink to this heading">#</a></h3>
<p>Let us provide some ways to create numeric vectors with possibly
more than 1 element.</p>
<p>First, the <strong class="command">c</strong> function we introduced in the previous chapter,
can be used to <em>c</em>ombine (concatenate) many numeric vectors, each
of any length, so as to form a single object:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w">  </span><span class="c1"># 3 vectors of length 1  -&gt;  1 vector of length 3</span>
<span class="c1">## [1] 1 2 3</span>
<span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="kc">NA_real_</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">),</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">7</span><span class="p">,</span><span class="w"> </span><span class="kc">Inf</span><span class="p">)))</span>
<span class="c1">## [1]   1   2  NA   4   5   6   7 Inf</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Running <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;c&quot;)</span></code>, we will see that its usage is like
“<strong class="command">c</strong><code class="code docutils literal notranslate"><span class="pre">(...)</span></code>”. In the current context,
this means that the <strong class="command">c</strong> function
takes an arbitrary number of arguments.
In <a class="reference internal" href="210-design.html#sec-ellipsis"><span class="std std-numref">Section 9.5.6</span></a>, we will study
the dot-dot-dot (ellipsis) parameter in more detail.</p>
</div>
</section>
<section id="repeating-entries-with-rep">
<span id="sec-rep"></span><h3><span class="section-number">2.1.3. </span>Repeating entries with <strong class="command">rep</strong><a class="headerlink" href="#repeating-entries-with-rep" title="Permalink to this heading">#</a></h3>
<p>Second, <strong class="command">rep</strong> <em>rep</em>licates the elements
in a given vector a given number of times.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">rep</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">)</span>
<span class="c1">## [1] 1 1 1 1 1</span>
<span class="nf">rep</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">),</span><span class="w"> </span><span class="m">4</span><span class="p">)</span>
<span class="c1">##  [1] 1 2 3 1 2 3 1 2 3 1 2 3</span>
</pre></div>
</div>
<p>In the second case, the whole vector (1, 2, 3) has been <em>recycled</em>
(tiled) four times. Interestingly, if the second argument was a vector
of the same length as the first one, the behaviour would be quite different:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">rep</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">))</span>
<span class="c1">## [1] 1 1 2 3 3 3 3</span>
<span class="nf">rep</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">))</span>
<span class="c1">##  [1] 1 1 1 1 2 2 2 2 3 3 3 3</span>
</pre></div>
</div>
<p>Here, <em>each</em> element is repeated the <em>corresponding</em> number of times.</p>
<p>If we call <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;rep&quot;)</span></code>, we will come across the notion like
“<strong class="command">rep</strong><code class="code docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">...)</span></code>” in the <em>Usage</em> section.
Unfortunately, it is rather peculiar, but reading further
we discover the dot-dot-dot stands for one of the following
further parameters (see the <em>Arguments</em> section):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">times</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">length.out</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">each</span></code>.</p></li>
</ul>
<p>So far, we have been playing with <code class="docutils literal notranslate"><span class="pre">times</span></code>,
which is listed second in the parameter list (after <code class="docutils literal notranslate"><span class="pre">x</span></code> – the vector
whose elements are to be repeated).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It turns out that the following function calls are all equivalent:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">rep</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">),</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="w">   </span><span class="c1"># positional matching of arguments: `x`, then `times`</span>
<span class="nf">rep</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">),</span><span class="w"> </span><span class="n">times</span><span class="o">=</span><span class="m">4</span><span class="p">)</span><span class="w">    </span><span class="c1"># `times` is the second argument</span>
<span class="nf">rep</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">),</span><span class="w"> </span><span class="n">times</span><span class="o">=</span><span class="m">4</span><span class="p">)</span><span class="w">  </span><span class="c1"># keyword arguments of the form name=value</span>
<span class="nf">rep</span><span class="p">(</span><span class="n">times</span><span class="o">=</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">))</span><span class="w">  </span><span class="c1"># keyword arguments can be given in any order</span>
<span class="nf">rep</span><span class="p">(</span><span class="n">times</span><span class="o">=</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">))</span><span class="w">    </span><span class="c1"># mixed positional and keyword arguments</span>
</pre></div>
</div>
</div>
<p>We can also pass <code class="docutils literal notranslate"><span class="pre">each</span></code> or <code class="docutils literal notranslate"><span class="pre">length.out</span></code>
(a dot has no special meaning in R; see <a class="reference internal" href="#sec-assign"><span class="std std-numref">Section 2.2</span></a>),
but their names should be mentioned explicitly:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">rep</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">),</span><span class="w"> </span><span class="n">length.out</span><span class="o">=</span><span class="m">7</span><span class="p">)</span>
<span class="c1">## [1] 1 2 3 1 2 3 1</span>
<span class="nf">rep</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">),</span><span class="w"> </span><span class="n">each</span><span class="o">=</span><span class="m">3</span><span class="p">)</span>
<span class="c1">## [1] 1 1 1 2 2 2 3 3 3</span>
<span class="nf">rep</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">),</span><span class="w"> </span><span class="n">length.out</span><span class="o">=</span><span class="m">7</span><span class="p">,</span><span class="w"> </span><span class="n">each</span><span class="o">=</span><span class="m">3</span><span class="p">)</span>
<span class="c1">## [1] 1 1 1 2 2 2 3</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Whether it was a good programming practice to actually
implement a range of varied behaviours inside a single
function is a matter of taste.
On the one hand, in all of the  examples above, we do repeat the input elements
somehow, so remembering just one function name is really convenient.
Nevertheless, a drastic change in the repetition pattern
depending, e.g., on the length of the <code class="docutils literal notranslate"><span class="pre">times</span></code> argument can be bug-prone.
Anyway, we have been warned<a class="footnote-reference brackets" href="#footillusionarycare" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
</div>
<p>Zero-length vectors are possible too:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">rep</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">),</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="c1">## numeric(0)</span>
</pre></div>
</div>
<p>Even though their handling might be a little tricky
(compare <a class="reference internal" href="210-design.html#chap-design"><span class="std std-numref">Chapter 9</span></a>),
we will see later that they are useful in contexts like
“create an empty data frame with a specific column structure”.</p>
<p>Also note that R often allows for partial matching
of named arguments, but its use is a bad programming practice;
see <a class="reference internal" href="320-language.html#sec-sys-call"><span class="std std-numref">Section 15.4.4</span></a> for more details.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">rep</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">),</span><span class="w"> </span><span class="n">len</span><span class="o">=</span><span class="m">7</span><span class="p">)</span><span class="w">  </span><span class="c1"># not recommended (see later)</span>
<span class="c1">## Warning in rep(c(1, 2, 3), len = 7): partial argument match of &#39;len&#39; to</span>
<span class="c1">##     &#39;length.out&#39;</span>
<span class="c1">## [1] 1 2 3 1 2 3 1</span>
</pre></div>
</div>
<p>The only reason we see the warning message is because
we have manually set <strong class="command">options</strong><code class="code docutils literal notranslate"><span class="pre">(warnPartialMatchArgs=TRUE)</span></code>
in our environment. It is not set by default.</p>
</section>
<section id="generating-arithmetic-progressions-with-seq-and">
<h3><span class="section-number">2.1.4. </span>Generating arithmetic progressions with <strong class="command">seq</strong> and `<strong class="command">:</strong>`<a class="headerlink" href="#generating-arithmetic-progressions-with-seq-and" title="Permalink to this heading">#</a></h3>
<p>Third, we can call the <strong class="command">seq</strong> function
to create a sequence of equally-spaced numbers
(on a linear scale, i.e., an arithmetic progression).</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">15</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">)</span>
<span class="c1">## [1]  1  3  5  7  9 11 13 15</span>
</pre></div>
</div>
<p>Reading the function’s help page,
we note that it has the following parameters:
<code class="docutils literal notranslate"><span class="pre">from</span></code>, <code class="docutils literal notranslate"><span class="pre">to</span></code>, <code class="docutils literal notranslate"><span class="pre">by</span></code>, <code class="docutils literal notranslate"><span class="pre">length.out</span></code>, amongst others.</p>
<p>Thus, the above call is equivalent to:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">seq</span><span class="p">(</span><span class="n">from</span><span class="o">=</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="o">=</span><span class="m">15</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="o">=</span><span class="m">2</span><span class="p">)</span>
<span class="c1">## [1]  1  3  5  7  9 11 13 15</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">to</span></code> actually means “up to”:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">seq</span><span class="p">(</span><span class="n">from</span><span class="o">=</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="o">=</span><span class="m">16</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="o">=</span><span class="m">2</span><span class="p">)</span>
<span class="c1">## [1]  1  3  5  7  9 11 13 15</span>
</pre></div>
</div>
<p>We can also pass <code class="docutils literal notranslate"><span class="pre">length.out</span></code> instead of <code class="docutils literal notranslate"><span class="pre">by</span></code>.
In such a case, the increments or decrements will be computed via the formula
<code class="docutils literal notranslate"><span class="pre">((to</span> <span class="pre">-</span> <span class="pre">from)/(length.out</span> <span class="pre">-</span> <span class="pre">1))</span></code>; this <em>default value</em>
is reported in the <em>Usage</em> section in <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;seq&quot;)</span></code>.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">length.out</span><span class="o">=</span><span class="m">5</span><span class="p">)</span>
<span class="c1">## [1] 1.00 0.75 0.50 0.25 0.00</span>
</pre></div>
</div>
<p>Also, this:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">seq</span><span class="p">(</span><span class="n">length.out</span><span class="o">=</span><span class="m">5</span><span class="p">)</span><span class="w">  </span><span class="c1"># default `from` is 1</span>
<span class="c1">## [1] 1 2 3 4 5</span>
</pre></div>
</div>
<p>Arithmetic progressions with step equal to 1 or -1
can also be generated via the `<strong class="command">:</strong>` operator.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="w">    </span><span class="c1"># seq(1, 10) or seq(1, 10, 1)</span>
<span class="c1">##  [1]  1  2  3  4  5  6  7  8  9 10</span>
<span class="m">-1</span><span class="o">:</span><span class="m">10</span><span class="w">   </span><span class="c1"># seq(-1, 10) or seq(-1, 10, 1)</span>
<span class="c1">##  [1] -1  0  1  2  3  4  5  6  7  8  9 10</span>
<span class="m">-1</span><span class="o">:</span><span class="m">-10</span><span class="w">  </span><span class="c1"># seq(-1, -10) or seq(-1, -10, -1)</span>
<span class="c1">##  [1]  -1  -2  -3  -4  -5  -6  -7  -8  -9 -10</span>
</pre></div>
</div>
<p>Note the order of precedence of this operator:
“<code class="docutils literal notranslate"><span class="pre">-1:10</span></code>” means “<code class="docutils literal notranslate"><span class="pre">(-1):10</span></code>” and not “<code class="docutils literal notranslate"><span class="pre">-(1:10)</span></code>”;
compare <a class="reference internal" href="#sec-precedence-numeric"><span class="std std-numref">Section 2.4.3</span></a>.</p>
<div class="proof proof-type-exercise" id="id18">

    <div class="proof-title">
        <span class="proof-type">Exercise 2.1</span>
        
    </div><div class="proof-content">
<p>Take a look at the manual page of <strong class="command">seq_along</strong> and <strong class="command">seq_len</strong>
and determine whether they can easily be done without,
having <strong class="command">seq</strong><a class="footnote-reference brackets" href="#footinteger" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> at hand.</p>
</div></div></section>
<section id="generating-pseudorandom-numbers">
<span id="sec-pseudorandom"></span><h3><span class="section-number">2.1.5. </span>Generating pseudorandom numbers<a class="headerlink" href="#generating-pseudorandom-numbers" title="Permalink to this heading">#</a></h3>
<p>We can also generate sequences drawn independently from a range
of univariate probability distributions.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">runif</span><span class="p">(</span><span class="m">7</span><span class="p">)</span><span class="w">  </span><span class="c1"># uniform U(0, 1)</span>
<span class="c1">## [1] 0.287578 0.788305 0.408977 0.883017 0.940467 0.045556 0.528105</span>
<span class="nf">rnorm</span><span class="p">(</span><span class="m">7</span><span class="p">)</span><span class="w">  </span><span class="c1"># normal N(0, 1)</span>
<span class="c1">## [1]  1.23950 -0.10897 -0.11724  0.18308  1.28055 -1.72727  1.69018</span>
</pre></div>
</div>
<p>These correspond to seven pseudorandom
deviates following the uniform distribution
on the unit interval (i.e., (0, 1)) and
the standard normal distribution
(i.e., with expectation 0 and standard deviation 1),
respectively; compare <a class="reference internal" href="#fig-ex-hist"><span class="std std-numref">Figure 2.3</span></a>.</p>
<p>For more <em>named</em> distribution classes (frequently occurring in various
real-world statistical modelling exercises), see
<a class="reference internal" href="#sec-probability-distributions"><span class="std std-numref">Section 2.3.4</span></a>.</p>
<p>Another useful function samples a number of values from a given vector,
either with or without replacement:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">sample</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w"> </span><span class="n">replace</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w">  </span><span class="c1"># 20 with replacement (allow repetitions)</span>
<span class="c1">##  [1]  3  3 10  2  6  5  4  6  9 10  5  3  9  9  9  3  8 10  7 10</span>
<span class="nf">sample</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">replace</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span><span class="w">  </span><span class="c1"># 5 without replacement (do not repeat)</span>
<span class="c1">## [1] 9 3 4 6 1</span>
</pre></div>
</div>
<p>The distribution of the sampled values does not need to be uniform;
the <code class="docutils literal notranslate"><span class="pre">prob</span></code> argument may be fed with a vector of the corresponding
probabilities. For example, here are 20 independent realisations
of the random variable <span class="math notranslate nohighlight">\(X\)</span> such that
<span class="math notranslate nohighlight">\(\Pr(X=0)=0.9\)</span>  (the probability that we obtain 0 is equal to 90%)
and <span class="math notranslate nohighlight">\(\Pr(X=1)=0.1\)</span>:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">sample</span><span class="p">(</span><span class="m">0</span><span class="o">:</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w"> </span><span class="n">replace</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">prob</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">0.9</span><span class="p">,</span><span class="w"> </span><span class="m">0.1</span><span class="p">))</span>
<span class="c1">##  [1] 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0 0 0 1</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="docutils literal notranslate"><span class="pre">n</span></code> is a single number (a numeric vector of length 1), then
<strong class="command">sample</strong><code class="code docutils literal notranslate"><span class="pre">(n,</span> <span class="pre">...)</span></code> is equivalent to
<strong class="command">sample</strong><code class="code docutils literal notranslate"><span class="pre">(1:n,</span> <span class="pre">...)</span></code>.
Similarly, <strong class="command">seq</strong><code class="code docutils literal notranslate"><span class="pre">(n)</span></code> is a synonym for <strong class="command">seq</strong><code class="code docutils literal notranslate"><span class="pre">(1,</span> <span class="pre">n)</span></code>
or <strong class="command">seq</strong><code class="code docutils literal notranslate"><span class="pre">(1,</span> </code><strong class="command">length</strong><code class="code docutils literal notranslate"><span class="pre">(n))</span></code>,
depending on the length of <code class="docutils literal notranslate"><span class="pre">n</span></code>.
This is a dangerous behaviour which can occasionally backfire
and lead to bugs (check what happens when <code class="docutils literal notranslate"><span class="pre">n</span></code> is, e.g., 0).
Nonetheless, we have been warned and from now on are going to
be extra careful (but are we really?).
Read more at <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;sample&quot;)</span></code> and <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;seq&quot;)</span></code>.</p>
</div>
<p>Let us stress that the numbers we obtain are merely <em>pseudo</em>random,
because they are generated algorithmically.
R uses the Mersenne-Twister MT19937 method <span id="id5">[<a class="reference internal" href="999-bibliography.html#id35" title="Matsumoto, M. and Nishimura, T. (1998).  Mersenne Twister: A 623-dimensionally equidistributed uniform pseudo-random number generator. ACM Transactions on Modeling and Computer Simulation, 8:3–30.">41</a>]</span> by default;
see <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;RNG&quot;)</span></code> and <span id="id6">[<a class="reference internal" href="999-bibliography.html#id34" title="Devroye, L. (1986).  Non-Uniform Random Variate Generation. Springer-Verlag. URL: https://luc.devroye.org/rnbookindex.html.">21</a>, <a class="reference internal" href="999-bibliography.html#id41" title="Gentle, J.E. (2003).  Random Number Generation and Monte Carlo methods. Springer.">28</a>, <a class="reference internal" href="999-bibliography.html#id32" title="Knuth, D.E. (1997).  The Art of Computer Programming II: Seminumerical Algorithms. Addison-Wesley.">38</a>]</span>.
By setting the <em>seed</em> of the random number generator, i.e., re-setting
its state to a given one, we can obtain results
that are <em>reproducible</em>.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">set.seed</span><span class="p">(</span><span class="m">12345</span><span class="p">)</span><span class="w">  </span><span class="c1"># seeds are specified with integers</span>
<span class="nf">sample</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">replace</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w"> </span><span class="c1"># a,b,c,d,e</span>
<span class="c1">## [1]  3 10  8 10  8</span>
<span class="nf">sample</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">replace</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w"> </span><span class="c1"># f,g,h,i,j</span>
<span class="c1">## [1]  2  6  6  7 10</span>
</pre></div>
</div>
<p>Setting the seed to the one used previously gives:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">set.seed</span><span class="p">(</span><span class="m">12345</span><span class="p">)</span>
<span class="nf">sample</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">replace</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w"> </span><span class="c1"># a,b,c,d,e</span>
<span class="c1">## [1]  3 10  8 10  8</span>
</pre></div>
</div>
<p>We did not(?) expect that! And now for something completely different:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">set.seed</span><span class="p">(</span><span class="m">12345</span><span class="p">)</span>
<span class="nf">sample</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">replace</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w"> </span><span class="c1"># a,b,c,d,e,f,g,h,i,j</span>
<span class="c1">##  [1]  3 10  8 10  8  2  6  6  7 10</span>
</pre></div>
</div>
<p>Reproducibility is a crucial feature of each truly scientific experiment.
The same initial condition (here: the same seed), leads to
exactly the same outcomes.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some claim that the only unsuspicious seed is 42,
but each programmer can have their own picks.
Yours truly, for example, uses 123, 1234, and 12345 as well.
When performing many runs of Monte Carlo experiments,
it may be a good idea to call <strong class="command">set.seed</strong><code class="code docutils literal notranslate"><span class="pre">(i)</span></code>
in the <code class="docutils literal notranslate"><span class="pre">i</span></code>-th iteration of a simulation we are trying to program.</p>
<p>Anyhow, we should make sure that our
seed settings are applied consistently across all our scripts.
Otherwise, we might be accused of tampering with evidence.
For instance, here is the ultimate proof that we are very lucky today:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">set.seed</span><span class="p">(</span><span class="m">1679619</span><span class="p">)</span><span class="w">  </span><span class="c1"># totally unsuspicious, right?</span>
<span class="nf">sample</span><span class="p">(</span><span class="m">0</span><span class="o">:</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w"> </span><span class="n">replace</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w">  </span><span class="c1"># so random</span>
<span class="c1">##  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</span>
</pre></div>
</div>
<p>This is exactly why reproducible scripts and auxiliary
data should be published alongside all research reports or papers.
Only open, transparent science can be fully trustworthy.</p>
</div>
<p>If <strong class="command">set.seed</strong> is not called explicitly,
and the random state is not restored from the previously saved R session
(see <a class="reference internal" href="330-environment.html#chap-environment"><span class="std std-numref">Chapter 16</span></a>), then the random generator is initialised
based on the current wall time and the identifier of the running R instance
(PID). This may give the impression that the numbers we generate are
surprising.</p>
<p>In order to understand the “pseudo” part of the said randomness better,
in <a class="reference internal" href="180-flow.html#sec-loops"><span class="std std-numref">Section 8.3</span></a>, we will build a very simple random generator
ourselves.</p>
</section>
<section id="reading-data-with-scan">
<span id="sec-scan"></span><h3><span class="section-number">2.1.6. </span>Reading data with <strong class="command">scan</strong><a class="headerlink" href="#reading-data-with-scan" title="Permalink to this heading">#</a></h3>
<p>The example text file named <a class="reference external" href="https://github.com/gagolews/teaching-data/raw/master/marek/euraud-20200101-20200630.csv"><code class="docutils literal notranslate"><span class="pre">euraud-20200101-20200630.csv</span></code></a>
gives the EUR to AUD exchange rates
(how many Australian Dollars can one buy for 1 Euro)
from 1 January to 30 June 2020 (remember COVID-19?). Let us preview
the first couple of lines:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EUR/AUD Exchange Rates</span>
<span class="c1"># Source: Statistical Data Warehouse of the European Central Bank System</span>
<span class="c1"># https://www.ecb.europa.eu/stats/policy_and_exchange_rates/</span>
<span class="c1"># (provided free of charge)</span>
<span class="n">NA</span>
<span class="mf">1.6006</span>
<span class="mf">1.6031</span>
<span class="n">NA</span>
</pre></div>
</div>
<p>The four first lines that begin with “<code class="docutils literal notranslate"><span class="pre">#</span></code>” merely serve as
comments for us, humans; they should be ignored by the interpreter.
The first “real” value, <code class="docutils literal notranslate"><span class="pre">NA</span></code>, corresponds to the 1st of January
(Wednesday; New Years Day; Forex markets were closed,
hence a missing observation).</p>
<p>The <strong class="command">scan</strong> function can be used to read all the inputs
and convert them to a single numeric vector:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">scan</span><span class="p">(</span><span class="nf">paste0</span><span class="p">(</span><span class="s">&quot;https://github.com/gagolews/teaching-data/raw/&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;master/marek/euraud-20200101-20200630.csv&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">comment.char</span><span class="o">=</span><span class="s">&quot;#&quot;</span><span class="p">)</span>
<span class="c1">##  [1]     NA 1.6006 1.6031     NA     NA 1.6119 1.6251 1.6195 1.6193 1.6132</span>
<span class="c1">## [11]     NA     NA 1.6117 1.6110 1.6188 1.6115 1.6122     NA     NA 1.6154</span>
<span class="c1">## [21] 1.6177 1.6184 1.6149 1.6127     NA     NA 1.6291 1.6290 1.6299 1.6412</span>
<span class="c1">## [31] 1.6494     NA     NA 1.6521 1.6439 1.6299 1.6282 1.6417     NA     NA</span>
<span class="c1">## [41] 1.6373 1.6260 1.6175 1.6138 1.6151     NA     NA 1.6129 1.6195 1.6142</span>
<span class="c1">## [51] 1.6294 1.6363     NA     NA 1.6384 1.6442 1.6565 1.6672 1.6875     NA</span>
<span class="c1">## [61]     NA 1.6998 1.6911 1.6794 1.6917 1.7103     NA     NA 1.7330 1.7377</span>
<span class="c1">## [71] 1.7389 1.7674 1.7684     NA     NA 1.8198 1.8287 1.8568 1.8635 1.8226</span>
<span class="c1">## [81]     NA     NA 1.8586 1.8315 1.7993 1.8162 1.8209     NA     NA 1.8021</span>
<span class="c1">## [91] 1.7967 1.8053 1.7970 1.8004     NA     NA 1.7790 1.7578 1.7596</span>
<span class="c1">##  [ reached getOption(&quot;max.print&quot;) -- omitted 83 entries ]</span>
</pre></div>
</div>
<p>We used the <strong class="command">paste0</strong> function to concatenate two
long (too long to fit a single line of code)
strings to form a single URL; see <a class="reference internal" href="160-character.html#sec-string-concatenate"><span class="std std-numref">Section 6.1.3</span></a>.</p>
<p>We can also read the files located on our computer, for example:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">scan</span><span class="p">(</span><span class="s">&quot;~/Projects/teaching-data/marek/euraud-20200101-20200630.csv&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">comment.char</span><span class="o">=</span><span class="s">&quot;#&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>uses an absolute file path that starts at the user’s home
directory, denoted “<code class="docutils literal notranslate"><span class="pre">~</span></code>”: yours truly’s case is <code class="docutils literal notranslate"><span class="pre">/home/gagolews/</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For portability reasons, we should use slashes, “<code class="docutils literal notranslate"><span class="pre">/</span></code>”, as path
separators (but see <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;file.path&quot;)</span></code> and <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;.Platform&quot;)</span></code>).
These are not only recognised by all Unix-like boxes
but also other popular operating systems.
Note that URLs (such as <a class="reference external" href="https://www.r-project.org/">https://www.r-project.org/</a>)
feature slashes too.</p>
</div>
<p>Paths can also be relative to the current working directory,
denoted “<code class="docutils literal notranslate"><span class="pre">.</span></code>”. It can be read via a call to <strong class="command">getwd</strong>.
Usually, it is the directory from where the R session has been started.</p>
<p>For instance, if the working directory was
<code class="docutils literal notranslate"><span class="pre">/home/gagolews/Projects/teaching-data/marek</span></code>,
we could have written the file path equivalently as
<code class="docutils literal notranslate"><span class="pre">./euraud-20200101-20200630.csv</span></code> or even
<code class="docutils literal notranslate"><span class="pre">euraud-20200101-20200630.csv</span></code>.</p>
<p>On as side note, <code class="docutils literal notranslate"><span class="pre">../</span></code> would denote the parent directory
of the current working directory. For instance,
<code class="docutils literal notranslate"><span class="pre">../r/iris.csv</span></code> would be equivalent
to <code class="docutils literal notranslate"><span class="pre">/home/gagolews/Projects/teaching-data/r/iris.csv</span></code>.</p>
<div class="proof proof-type-exercise" id="id19">

    <div class="proof-title">
        <span class="proof-type">Exercise 2.2</span>
        
    </div><div class="proof-content">
<p>Read the help page about <strong class="command">scan</strong>. Take note of the following
formal arguments and their meaning: <code class="docutils literal notranslate"><span class="pre">dec</span></code>, <code class="docutils literal notranslate"><span class="pre">sep</span></code>, <code class="docutils literal notranslate"><span class="pre">what</span></code>,
<code class="docutils literal notranslate"><span class="pre">comment.char</span></code>, and <code class="docutils literal notranslate"><span class="pre">na.strings</span></code>.</p>
</div></div><p>Later we will discuss the <strong class="command">read.table</strong> and <strong class="command">read.csv</strong>,
which are wrappers around <strong class="command">scan</strong> that can be used to read
tabular data. Note that <strong class="command">write</strong> can be used to export an atomic
vector’s contents to a text file.</p>
<div class="proof proof-type-example" id="id20">

    <div class="proof-title">
        <span class="proof-type">Example 2.3</span>
        
    </div><div class="proof-content">
<p><a class="reference internal" href="#fig-euraud-plot"><span class="std std-numref">Figure 2.1</span></a> shows the graph of
the aforementioned exchange rates, which was generated by calling:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">plot</span><span class="p">(</span><span class="nf">scan</span><span class="p">(</span><span class="nf">paste0</span><span class="p">(</span><span class="s">&quot;https://github.com/gagolews/teaching-data/raw/&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;master/marek/euraud-20200101-20200630.csv&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">comment.char</span><span class="o">=</span><span class="s">&quot;#&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">xlab</span><span class="o">=</span><span class="s">&quot;Day&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ylab</span><span class="o">=</span><span class="s">&quot;EUR/AUD&quot;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default" id="id21">
<span id="fig-euraud-plot"></span><img alt="../_images/euraud-plot-1.png" src="../_images/euraud-plot-1.png" />
<figcaption>
<p><span class="caption-number">Figure 2.1 </span><span class="caption-text">EUR/AUD exchange rates from 2020-01-01 (day 1) to 2020-06-30 (day 182)</span><a class="headerlink" href="#id21" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Somewhat misleadingly (and for the reasons that will
become apparent later), the documentation of <strong class="command">plot</strong>
can be accessed by calling <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;plot.default&quot;)</span></code>.
Read about, and experiment with, different values of the
<code class="docutils literal notranslate"><span class="pre">main</span></code>, <code class="docutils literal notranslate"><span class="pre">xlab</span></code>, <code class="docutils literal notranslate"><span class="pre">ylab</span></code>, <code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">col</span></code>, <code class="docutils literal notranslate"><span class="pre">pch</span></code>, <code class="docutils literal notranslate"><span class="pre">cex</span></code>, <code class="docutils literal notranslate"><span class="pre">lty</span></code>, and <code class="docutils literal notranslate"><span class="pre">lwd</span></code>
arguments. More plotting routines will be discussed in
<a class="reference internal" href="250-graphics.html#chap-graphics"><span class="std std-numref">Chapter 13</span></a>.</p>
</div></div></section>
</section>
<section id="creating-named-objects">
<span id="sec-assign"></span><h2><span class="section-number">2.2. </span>Creating named objects<a class="headerlink" href="#creating-named-objects" title="Permalink to this heading">#</a></h2>
<p>Often, the objects we bring forth will need to be memorised so that
they can be referred to in further computations. The assignment operator,
`<strong class="command">&lt;-</strong>`, can be used for this very purpose:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="w">  </span><span class="c1"># creates a numeric vector and binds the name `x` to it</span>
</pre></div>
</div>
<p>The now-named object can be recalled<a class="footnote-reference brackets" href="#footenvir" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> and dealt with
as we please:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">  </span><span class="c1"># or just `x` in the R console</span>
<span class="c1">## [1] 1 2 3</span>
<span class="nf">sum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">    </span><span class="c1"># example operation: compute the sum of all elements in `x`</span>
<span class="c1">## [1] 6</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>In R, all names are <em>case-sensitive</em>.
Hence, <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">X</span></code> can coexist peacefully: when set,
they refer to two different objects.
Also, if we tried to call <code class="docutils literal notranslate"><span class="pre">Print(x)</span></code> above, we would get an error.</p>
</div>
<p>Typically, we will be using what we refer to as <em>syntactic names</em>
(see <a class="reference internal" href="210-design.html#sec-backtick"><span class="std std-numref">Section 9.4.1</span></a> for an exception though).
In the R help system (see <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;make.names&quot;)</span></code>
and also <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;Quotes&quot;)</span></code>), we read:
<em>A syntactically valid name consists of letters, numbers and the
dot or underline characters and starts with a letter or the dot
not followed by a number.  Names such as <code class="docutils literal notranslate"><span class="pre">.2way</span></code> are not valid,
and neither are the reserved words.</em> For the list of the latter,
see <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;Reserved&quot;)</span></code>.</p>
<p>A good name is self-explanatory and thus reader-friendly:
<code class="docutils literal notranslate"><span class="pre">patients</span></code>, <code class="docutils literal notranslate"><span class="pre">mean</span></code>, and <code class="docutils literal notranslate"><span class="pre">average_scores</span></code> are way better (if they really
are what they claim they are) than <code class="docutils literal notranslate"><span class="pre">xyz123</span></code>, <code class="docutils literal notranslate"><span class="pre">crap</span></code>, or <code class="docutils literal notranslate"><span class="pre">spam</span></code>.
Also, it might not be such a bad idea to get used to denoting:</p>
<ul class="simple">
<li><p>vectors with <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, <code class="docutils literal notranslate"><span class="pre">z</span></code>,</p></li>
<li><p>matrices (and matrix-like objects) with <code class="docutils literal notranslate"><span class="pre">A</span></code>, <code class="docutils literal notranslate"><span class="pre">B</span></code>, …, <code class="docutils literal notranslate"><span class="pre">X</span></code>, <code class="docutils literal notranslate"><span class="pre">Y</span></code>, <code class="docutils literal notranslate"><span class="pre">Z</span></code>,</p></li>
<li><p>integer indexes with letters <code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">j</span></code>, <code class="docutils literal notranslate"><span class="pre">k</span></code>, <code class="docutils literal notranslate"><span class="pre">l</span></code>,</p></li>
<li><p>object sizes with <code class="docutils literal notranslate"><span class="pre">n</span></code>, <code class="docutils literal notranslate"><span class="pre">m</span></code>, <code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">p</span></code> or <code class="docutils literal notranslate"><span class="pre">nx</span></code>, <code class="docutils literal notranslate"><span class="pre">ny</span></code>, etc.,</p></li>
</ul>
<p>especially when they are only of temporary nature
(for storing some auxiliary results, iterating over
collections of objects, etc.).</p>
<p>There are numerous naming conventions that we can adopt,
but most often they are a matter of taste;
<code class="docutils literal notranslate"><span class="pre">snake_case</span></code>, <code class="docutils literal notranslate"><span class="pre">lowerCamelCase</span></code>, <code class="docutils literal notranslate"><span class="pre">UpperCamelCase</span></code>, <code class="docutils literal notranslate"><span class="pre">flatcase</span></code>, or
<code class="docutils literal notranslate"><span class="pre">dot.case</span></code> are equally good as long as they are used coherently
(for instance, some use <code class="docutils literal notranslate"><span class="pre">snake_case</span></code> for vectors
and <code class="docutils literal notranslate"><span class="pre">UpperCamelCase</span></code> for functions). It may even be the case
that we have little choice but to adhere to the naming conventions
agreed upon in the project we are about to contribute to.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Let us stress that a dot, “<code class="docutils literal notranslate"><span class="pre">.</span></code>”, has no special meaning (however, see
<a class="reference internal" href="220-s3.html#chap-s3"><span class="std std-numref">Chapter 10</span></a> and <a class="reference internal" href="330-environment.html#chap-environment"><span class="std std-numref">Chapter 16</span></a> for some asterisks);
<code class="docutils literal notranslate"><span class="pre">na.omit</span></code> is as good a name
as <code class="docutils literal notranslate"><span class="pre">na_omit</span></code>, <code class="docutils literal notranslate"><span class="pre">naOmit</span></code>, <code class="docutils literal notranslate"><span class="pre">NAOMIT</span></code>, <code class="docutils literal notranslate"><span class="pre">naomit</span></code>, and <code class="docutils literal notranslate"><span class="pre">NaOmit</span></code>.
Users coming from some other (C, C++, Java, Python, etc.) programming
languages will need to habituate themselves to this convention.</p>
</div>
<p>R, as a dynamic language, allows for introducing new variables at any time.
Moreover, existing names can be re-bound to new values. For instance:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">))</span><span class="w">  </span><span class="c1"># bracketed expression - printing not suppressed</span>
<span class="c1">## [1]   1  10 100</span>
<span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">y</span>
<span class="nf">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">## [1]   1  10 100</span>
</pre></div>
</div>
<p>Now <code class="docutils literal notranslate"><span class="pre">x</span></code> refers to a verbatim copy of <code class="docutils literal notranslate"><span class="pre">y</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Objects are automatically destroyed when there are
no more names bound with them. In particular, by now the
<em>garbage collector</em> should have got rid of the <code class="docutils literal notranslate"><span class="pre">1:3</span></code> vector begotten above
(to which the name <code class="docutils literal notranslate"><span class="pre">x</span></code> was bound previously). See
<code class="xref std std-numref docutils literal notranslate"><span class="pre">sec:memory-management</span></code> for more details on memory management.</p>
</div>
</section>
<section id="vectorised-mathematical-functions">
<span id="sec-vectorised-funs"></span><h2><span class="section-number">2.3. </span>Vectorised mathematical functions<a class="headerlink" href="#vectorised-mathematical-functions" title="Permalink to this heading">#</a></h2>
<p>Mathematically, we will be denoting a given vector <span class="math notranslate nohighlight">\(\boldsymbol{x}\)</span>
of length <em>n</em>
as <span class="math notranslate nohighlight">\((x_1, x_2, \dots, x_n)\)</span>.
In other words, its <em>i</em>-th element is equal to <span class="math notranslate nohighlight">\(x_i\)</span>.</p>
<p>Let us review some ubiquitous operations in numerical computing.</p>
<section id="abs-and-sqrt">
<h3><span class="section-number">2.3.1. </span><strong class="command">abs</strong> and <strong class="command">sqrt</strong><a class="headerlink" href="#abs-and-sqrt" title="Permalink to this heading">#</a></h3>
<p>R implements <em>vectorised</em> versions of the most popular
mathematical functions, e.g., <strong class="command">abs</strong> (absolute value, <span class="math notranslate nohighlight">\(|x|\)</span>) and
<strong class="command">sqrt</strong> (square root, <span class="math notranslate nohighlight">\(\sqrt{x}\)</span>).</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">abs</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">-1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">-3</span><span class="p">,</span><span class="w"> </span><span class="kc">NA_real_</span><span class="p">))</span>
<span class="c1">## [1]  2  1  0  3 NA</span>
</pre></div>
</div>
<p>Here, <em>vectorised</em> means that instead of being defined to act on a single
numeric value, the function of interest is applied on each element
in a vector. The <em>i</em>-th resulting item
is a transformed version of the <em>i</em>-th input.
If an input is a missing value, the corresponding output will be
marked as “don’t know” as well.</p>
<p>Another example:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">-1</span><span class="p">)</span>
<span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="c1">## Warning in sqrt(x): NaNs produced</span>
<span class="c1">## [1] 2.0000 1.4142    NaN</span>
</pre></div>
</div>
<p>To attract our attention to the fact that computing the square root of a
negative value yields a not-a-number, R generated an informative warning.
A warning is not an error though: the result is being reckoned as usual.</p>
<p>Also the fact that the irrational <span class="math notranslate nohighlight">\(\sqrt{2}\)</span> is <em>displayed</em><a class="footnote-reference brackets" href="#footprintopts" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>
as <code class="docutils literal notranslate"><span class="pre">1.4142</span></code>
does not mean that it is such a crude approximation
to <span class="math notranslate nohighlight">\(1.414213562373095048801688724209698\dots\)</span>;
it is only rounded when printing, for aesthetic reasons.
In fact, in <a class="reference internal" href="130-logical.html#sec-fp"><span class="std std-numref">Section 3.2.3</span></a>, we will point out that the computer’s
floating-point arithmetic allows for roughly 16 decimal digits precision
(but we shall see that the devil is in the detail).</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">print</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">digits</span><span class="o">=</span><span class="m">16</span><span class="p">)</span><span class="w">  </span><span class="c1"># display more significant figures</span>
<span class="c1">## [1] 2.000000000000000 1.414213562373095               NaN</span>
</pre></div>
</div>
</section>
<section id="rounding">
<h3><span class="section-number">2.3.2. </span>Rounding<a class="headerlink" href="#rounding" title="Permalink to this heading">#</a></h3>
<p>The following functions get rid of all or portions of
fractional parts of numbers:</p>
<ul class="simple">
<li><p><strong class="command">floor</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code> (rounds down to the nearest integer,
denoted <span class="math notranslate nohighlight">\(\lfloor x\rfloor\)</span>),</p></li>
<li><p><strong class="command">ceiling</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code>  (rounds up, denoted <span class="math notranslate nohighlight">\(\lceil x\rceil\)</span>),</p></li>
<li><p><strong class="command">trunc</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code> (rounds towards zero), and</p></li>
<li><p><strong class="command">round</strong><code class="code docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">digits=0)</span></code> (rounds to the nearest number with <code class="docutils literal notranslate"><span class="pre">digits</span></code> decimal digits).</p></li>
</ul>
<p>For instance:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">7.0001</span><span class="p">,</span><span class="w"> </span><span class="m">6.9999</span><span class="p">,</span><span class="w"> </span><span class="m">-4.3149</span><span class="p">,</span><span class="w"> </span><span class="m">-5.19999</span><span class="p">,</span><span class="w"> </span><span class="m">123.4567</span><span class="p">,</span><span class="w"> </span><span class="m">-765.4321</span><span class="p">,</span><span class="w"> </span><span class="m">0.5</span><span class="p">,</span><span class="w"> </span><span class="m">1.5</span><span class="p">,</span><span class="w"> </span><span class="m">2.5</span><span class="p">)</span>
<span class="nf">floor</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">## [1]    7    6   -5   -6  123 -766    0    1    2</span>
<span class="nf">ceiling</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">## [1]    8    7   -4   -5  124 -765    1    2    3</span>
<span class="nf">trunc</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">## [1]    7    6   -4   -5  123 -765    0    1    2</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If we call <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;round&quot;)</span></code>, we will read that its usage is like
<code class="docutils literal notranslate"><span class="pre">round(x,</span> <span class="pre">digits=0)</span></code>, which means that the <code class="docutils literal notranslate"><span class="pre">digits</span></code> parameter
is equipped with the <em>default value</em> of 0.
In other words, if rounding to 0 decimal digits is what we need,
the second argument can be omitted.</p>
</div>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">round</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">  </span><span class="c1"># the same as round(x, 0)</span>
<span class="c1">## [1]    7    7   -4   -5  123 -765    0    2    2</span>
<span class="nf">round</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
<span class="c1">## [1]    7.0    7.0   -4.3   -5.2  123.5 -765.4    0.5    1.5    2.5</span>
<span class="nf">round</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">-2</span><span class="p">)</span>
<span class="c1">## [1]    0    0    0    0  100 -800    0    0    0</span>
</pre></div>
</div>
</section>
<section id="natural-exponential-function-and-logarithm">
<h3><span class="section-number">2.3.3. </span>Natural exponential function and logarithm<a class="headerlink" href="#natural-exponential-function-and-logarithm" title="Permalink to this heading">#</a></h3>
<p>Moreover:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">exp</span></code><code class="code docutils literal notranslate"><span class="pre">(x)</span></code> outputs the natural exponential function, <span class="math notranslate nohighlight">\(e^x\)</span>, where
the Euler’s number <span class="math notranslate nohighlight">\(e\simeq 2.718\)</span>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log</span></code><code class="code docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">base=exp(1))</span></code> computes, by default,
the natural logarithm of <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(\log_e x\)</span>
(which is most often denoted simply as <span class="math notranslate nohighlight">\(\log x\)</span>).</p></li>
</ul>
<p>Recall that if <span class="math notranslate nohighlight">\(x=e^y\)</span>, then <span class="math notranslate nohighlight">\(\log_e x = y\)</span>, i.e., one is the
inverse of the other.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">log</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2.7183</span><span class="p">,</span><span class="w"> </span><span class="m">7.3891</span><span class="p">,</span><span class="w"> </span><span class="m">20.0855</span><span class="p">))</span><span class="w">  </span><span class="c1"># grows slowly</span>
<span class="c1">## [1] -Inf    0    1    2    3</span>
<span class="nf">exp</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">))</span><span class="w">                     </span><span class="c1"># grows fast</span>
<span class="c1">## [1]  1.0000  2.7183  7.3891 20.0855</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These functions enjoy a number of very useful identities and inequalities, including:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\log(x\cdot y)=\log x + \log y\)</span>,</p></li>
<li><p><span class="math notranslate nohighlight">\(\log(x^y) = y\log x\)</span>,</p></li>
<li><p><span class="math notranslate nohighlight">\(e^{x+y} = e^x\cdot e^y\)</span>.</p></li>
</ul>
<p>For more properties like these,
take a glance at Chapter 4 of the freely available handbook <span id="id9">[<a class="reference internal" href="999-bibliography.html#id57" title="Olver, F.W.J. and et al. (2021).  NIST Digital Library of Mathematical Functions. NIST. URL: https://dlmf.nist.gov/.">43</a>]</span>.</p>
</div>
<p>For the logarithm to a different base, say, <span class="math notranslate nohighlight">\(\log_{10} x\)</span>, we can call:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">log</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="m">1000</span><span class="p">,</span><span class="w"> </span><span class="m">1e10</span><span class="p">),</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w">  </span><span class="c1"># or log(..., base=10)</span>
<span class="c1">## [1] -Inf    0    1    2    3   10</span>
</pre></div>
</div>
<p>Note that if <span class="math notranslate nohighlight">\(\log_{b} x=y\)</span>, then <span class="math notranslate nohighlight">\(x=b^y\)</span>, for any <span class="math notranslate nohighlight">\(1\neq b&gt;0\)</span>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Commonly, a logarithmic scale is used for variables
that grow rapidly when expressed as functions of each other;
see <a class="reference internal" href="#fig-ex-log-scale"><span class="std std-numref">Figure 2.2</span></a>.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">seq</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">length.out</span><span class="o">=</span><span class="m">1001</span><span class="p">)</span>
<span class="nf">par</span><span class="p">(</span><span class="n">mfrow</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">))</span><span class="w">  </span><span class="c1"># two plots in one figure (1 row, 2 columns)</span>
<span class="nf">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="nf">exp</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="s">&quot;l&quot;</span><span class="p">)</span>
<span class="nf">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="nf">exp</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="s">&quot;l&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">log</span><span class="o">=</span><span class="s">&quot;y&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1"># log-scale on the y-axis</span>
</pre></div>
</div>
<figure class="align-default" id="id22">
<span id="fig-ex-log-scale"></span><img alt="../_images/ex-log-scale-1.png" src="../_images/ex-log-scale-1.png" />
<figcaption>
<p><span class="caption-number">Figure 2.2 </span><span class="caption-text">Linear- vs log-scale on the y-axis</span><a class="headerlink" href="#id22" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Note that <span class="math notranslate nohighlight">\(e^x\)</span> on the log-scale is just a straight line.
Also, keep in mind that such a transformation of the axes
can only be applied in the case of values strictly greater than 0.</p>
</div>
</section>
<section id="probability-distributions">
<span id="sec-probability-distributions"></span><h3><span class="section-number">2.3.4. </span>Probability distributions (*)<a class="headerlink" href="#probability-distributions" title="Permalink to this heading">#</a></h3>
<p>It should come as no surprise that R offers an extensive support for
many univariate probability distribution families, including:</p>
<ul>
<li><p>continuous distributions, which take values being arbitrary
real numbers (over the whole possible range or in some interval):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*unif</span></code> (uniform),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*norm</span></code> (normal),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*exp</span></code> (exponential),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*gamma</span></code> (gamma, <span class="math notranslate nohighlight">\(\Gamma\)</span>),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*beta</span></code> (beta, <span class="math notranslate nohighlight">\(\mathrm{B}\)</span>),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*lnorm</span></code> (log-normal),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*t</span></code> (Student),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*cauchy</span></code> (Cauchy–Lorentz),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*chisq</span></code> (chi-squared, <span class="math notranslate nohighlight">\(\chi^2\)</span>),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*f</span></code> (Snedecor–Fisher),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*weibull</span></code> (Weibull);</p></li>
</ul>
<p>with the prefix “<code class="docutils literal notranslate"><span class="pre">*</span></code>” being one of:</p>
<ul class="simple">
<li><p>“<code class="docutils literal notranslate"><span class="pre">d</span></code>” (probability density function, PDF),</p></li>
<li><p>“<code class="docutils literal notranslate"><span class="pre">p</span></code>” (cumulative distribution function, CDF; or survival function, SF),</p></li>
<li><p>“<code class="docutils literal notranslate"><span class="pre">q</span></code>” (quantile function, being the inverse of the CDF),</p></li>
<li><p>“<code class="docutils literal notranslate"><span class="pre">r</span></code>” (generation of random deviates; already mentioned);</p></li>
</ul>
</li>
<li><p>discrete distributions, i.e., those whose possible outcomes can be
easily enumerated (e.g., some integers).</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*binom</span></code> (binomial),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*geom</span></code> (geometric),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*pois</span></code> (Poisson),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*hyper</span></code> (hypergeometric),</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*nbinom</span></code> (negative binomial);</p></li>
</ul>
<p>here, prefixes “<code class="docutils literal notranslate"><span class="pre">p</span></code>” and “<code class="docutils literal notranslate"><span class="pre">r</span></code>” have the same meaning as above,
however:</p>
<ul class="simple">
<li><p>“<code class="docutils literal notranslate"><span class="pre">d</span></code>” now gives the probability <em>mass</em> function (PMF),</p></li>
<li><p>“<code class="docutils literal notranslate"><span class="pre">q</span></code>” yields the quantile function,
but one that is defined as a <em>generalised</em> inverse of the CDF.</p></li>
</ul>
</li>
</ul>
<p>Each distribution is characterised by a set of underlying parameters.
For instance, a normal distribution <span class="math notranslate nohighlight">\(\mathrm{N}(\mu, \sigma)\)</span>
can be pinpointed by setting its expected value
<span class="math notranslate nohighlight">\(\mu\in\mathbb{R}\)</span> and standard deviation
<span class="math notranslate nohighlight">\(\sigma&gt;0\)</span>.
In R, these two have been named <code class="docutils literal notranslate"><span class="pre">mean</span></code> and <code class="docutils literal notranslate"><span class="pre">sd</span></code>, respectively;
see <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;dnorm&quot;)</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The parametrisations assumed in R can be subtly different
from what we know from statistical textbooks or probability courses.
For example, the normal distribution can be parameterised
based on either standard deviation or variance,
and the exponential distribution can be defined via its expected
value or the reciprocal thereof.
We thus advise the reader to study carefully the documentation
of <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;dnorm&quot;)</span></code>, <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;dunif&quot;)</span></code>, <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;dexp&quot;)</span></code>,
<strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;dbinom&quot;)</span></code>,
and the like.</p>
<p>It is also worth to know the typical use cases
of each of the distribution listed, e.g., a Poisson distribution
can describe the probability of observing the number of independent
events in a fixed time interval (e.g., the number of users downloading
a copy of R from CRAN per hour), and an exponential distribution can model
the time between such events; compare <span id="id10">[<a class="reference internal" href="999-bibliography.html#id58" title="Forbes, C., Evans, M., Hastings, N., and Peacock, B. (2010).  Statistical Distributions. Wiley.">22</a>]</span>.</p>
</div>
<div class="proof proof-type-exercise" id="id23">

    <div class="proof-title">
        <span class="proof-type">Exercise 2.4</span>
        
    </div><div class="proof-content">
<p>A call to <strong class="command">hist</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code> draws a histogram,
which can serve as an estimator of the underlying continuous
probability density function of a given
sample; see <a class="reference internal" href="#fig-ex-hist"><span class="std std-numref">Figure 2.3</span></a> for an illustration.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">par</span><span class="p">(</span><span class="n">mfrow</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">))</span><span class="w">  </span><span class="c1"># 2 plots in 1 figure</span>
<span class="c1"># Uniform U(0, 1)</span>
<span class="nf">hist</span><span class="p">(</span><span class="nf">runif</span><span class="p">(</span><span class="m">10000</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="n">col</span><span class="o">=</span><span class="s">&quot;white&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">probability</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">main</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">)</span>
<span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">seq</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">length.out</span><span class="o">=</span><span class="m">101</span><span class="p">)</span>
<span class="nf">lines</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="nf">dunif</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="n">lwd</span><span class="o">=</span><span class="m">2</span><span class="p">)</span><span class="w">  </span><span class="c1"># draw the true density function (PDF)</span>
<span class="c1"># Normal N(0, 1)</span>
<span class="nf">hist</span><span class="p">(</span><span class="nf">rnorm</span><span class="p">(</span><span class="m">10000</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="n">col</span><span class="o">=</span><span class="s">&quot;white&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">probability</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">main</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">)</span>
<span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">seq</span><span class="p">(</span><span class="m">-4</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">length.out</span><span class="o">=</span><span class="m">101</span><span class="p">)</span>
<span class="nf">lines</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="nf">dnorm</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="n">lwd</span><span class="o">=</span><span class="m">2</span><span class="p">)</span><span class="w">  </span><span class="c1"># draw the PDF</span>
</pre></div>
</div>
<figure class="align-default" id="id24">
<span id="fig-ex-hist"></span><img alt="../_images/ex-hist-1.png" src="../_images/ex-hist-1.png" />
<figcaption>
<p><span class="caption-number">Figure 2.3 </span><span class="caption-text">Example histograms of some pseudorandom samples and the true underlying probability density functions: the uniform distribution on the unit interval (left) and the standard normal distribution (right)</span><a class="headerlink" href="#id24" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Draw a histogram of some random samples of different sizes <code class="docutils literal notranslate"><span class="pre">n</span></code>
from the following distributions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rnorm(n,</span> <span class="pre">µ,</span> <span class="pre">σ)</span></code> — normal <span class="math notranslate nohighlight">\(\mathrm{N}(\mu, \sigma)\)</span>
with expected values <span class="math notranslate nohighlight">\(\mu\in\{-1, 0, 5\}\)</span> (i.e., <span class="math notranslate nohighlight">\(\mu\)</span> being equal to
either <span class="math notranslate nohighlight">\(-1\)</span>, <span class="math notranslate nohighlight">\(0\)</span>, or <span class="math notranslate nohighlight">\(5\)</span>; read “<span class="math notranslate nohighlight">\(\in\)</span>” as “belongs to the given set”
or “in”)
and standard deviations
<span class="math notranslate nohighlight">\(\sigma\in\{0.5, 1, 5\}\)</span>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">runif(n,</span> <span class="pre">a,</span> <span class="pre">b)</span></code> — uniform <span class="math notranslate nohighlight">\(\mathrm{U}(a, b)\)</span>
on the interval <span class="math notranslate nohighlight">\((a, b)\)</span> with <span class="math notranslate nohighlight">\(a=0\)</span> and <span class="math notranslate nohighlight">\(b=1\)</span> as well as <span class="math notranslate nohighlight">\(a=-1\)</span> and <span class="math notranslate nohighlight">\(b=1\)</span>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rbeta(n,</span> <span class="pre">α,</span> <span class="pre">β)</span></code> — beta <span class="math notranslate nohighlight">\(\mathrm{B}(\alpha, \beta)\)</span>
with <span class="math notranslate nohighlight">\(\alpha,\beta\in\{0.5, 1, 2\}\)</span>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rexp(n,</span> <span class="pre">λ)</span></code> — exponential <span class="math notranslate nohighlight">\(\mathrm{E}(\lambda)\)</span>
with rates <span class="math notranslate nohighlight">\(\lambda\in\{0.5, 1, 10\}\)</span>;</p></li>
</ul>
<p>Moreover, read about and play with the
<code class="docutils literal notranslate"><span class="pre">breaks</span></code>, <code class="docutils literal notranslate"><span class="pre">main</span></code>, <code class="docutils literal notranslate"><span class="pre">xlab</span></code>, <code class="docutils literal notranslate"><span class="pre">ylab</span></code>, <code class="docutils literal notranslate"><span class="pre">xlim</span></code>, <code class="docutils literal notranslate"><span class="pre">ylim</span></code>, and <code class="docutils literal notranslate"><span class="pre">col</span></code>
parameters; see <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;hist&quot;)</span></code>.</p>
</div></div><div class="proof proof-type-example" id="id25">

    <div class="proof-title">
        <span class="proof-type">Example 2.5</span>
        
    </div><div class="proof-content">
<p>We roll a six-sided dice 12 times.
Let <span class="math notranslate nohighlight">\(C\)</span> be a random variable denoting the number of
cases where the “<code class="docutils literal notranslate"><span class="pre">1</span></code>” face is thrown.
<span class="math notranslate nohighlight">\(C\)</span> follows a binomial distribution <span class="math notranslate nohighlight">\(\mathrm{Bin}(n, p)\)</span>
with parameters <span class="math notranslate nohighlight">\(n=12\)</span> (the number of Bernoulli trials)
and <span class="math notranslate nohighlight">\(p=1/6\)</span> (the probability of <em>success</em> in a single roll).</p>
<p>The probabilities that the number of “<code class="docutils literal notranslate"><span class="pre">1</span></code>”s rolled will be equal to
0, 1, …, 4 , i.e., <span class="math notranslate nohighlight">\(P(C=0)\)</span>, <span class="math notranslate nohighlight">\(P(C=1)\)</span>, …, <span class="math notranslate nohighlight">\(P(C=4)\)</span>, respectively,
can be computed based on the probability mass function (<strong class="command">dbinom</strong>):</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">dbinom</span><span class="p">(</span><span class="m">0</span><span class="o">:</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="o">/</span><span class="m">6</span><span class="p">)</span><span class="w">  </span><span class="c1"># probability mass function at 5 different points</span>
<span class="c1">## [1] 0.112157 0.269176 0.296094 0.197396 0.088828</span>
</pre></div>
</div>
<p>On the other hand, the probability that we throw
more than three “<code class="docutils literal notranslate"><span class="pre">1</span></code>”s, <span class="math notranslate nohighlight">\(P(C &gt; 3) = 1-P(C\le 3)\)</span>,
can be determined by means of the cumulative distribution function
(<strong class="command">pbinom</strong>) or survival function (<code class="docutils literal notranslate"><span class="pre">pbinom(...,</span> <span class="pre">lower.tail=FALSE)</span></code>):</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="m">1</span><span class="o">-</span><span class="nf">pbinom</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="o">/</span><span class="m">6</span><span class="p">)</span><span class="w">  </span><span class="c1"># pbinom(3, 12, 1/6, lower.tail=FALSE)</span>
<span class="c1">## [1] 0.12518</span>
</pre></div>
</div>
<p>The smallest <span class="math notranslate nohighlight">\(c\)</span> such that <span class="math notranslate nohighlight">\(P(C \le c)\ge 0.95\)</span> can be computed
based on the quantile function:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">qbinom</span><span class="p">(</span><span class="m">0.5</span><span class="p">,</span><span class="w"> </span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="o">/</span><span class="m">6</span><span class="p">)</span>
<span class="c1">## [1] 2</span>
<span class="nf">pbinom</span><span class="p">(</span><span class="m">3</span><span class="o">:</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="o">/</span><span class="m">6</span><span class="p">)</span><span class="w">   </span><span class="c1"># for comparison: 0.95 is in-between</span>
<span class="c1">## [1] 0.87482 0.96365</span>
</pre></div>
</div>
<p>In other words, at least 95% of the time
we will be observing no more than 4 successes.</p>
<p>Also here are some pseudorandom realisations of <span class="math notranslate nohighlight">\(C\)</span> –
the number of “<code class="docutils literal notranslate"><span class="pre">1</span></code>”s in 30 simulations of 12 independent dice rolls each:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">rbinom</span><span class="p">(</span><span class="m">30</span><span class="p">,</span><span class="w"> </span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="o">/</span><span class="m">6</span><span class="p">)</span>
<span class="c1">##  [1] 1 3 2 4 4 0 2 4 2 2 4 2 3 2 0 4 1 0 1 4 4 3 2 6 2 3 2 2 1 1</span>
</pre></div>
</div>
</div></div></section>
<section id="special-functions">
<h3><span class="section-number">2.3.5. </span>Special functions (*)<a class="headerlink" href="#special-functions" title="Permalink to this heading">#</a></h3>
<p>Within mathematical formulae and across assorted application areas,
certain functions appear more frequently than others.
Hence, for the sake of notational brevity and computational precision,
many of them have been assigned special names.
For instance, the following may be mentioned in the definitions
related to some of the probability distributions listed above:</p>
<ul class="simple">
<li><p><strong class="command">gamma</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code> for <span class="math notranslate nohighlight">\(x&gt;0\)</span> computes
<span class="math notranslate nohighlight">\(\Gamma(x) = \int_0^\infty t^{x-1} e^{-t} \,dt\)</span>,</p></li>
<li><p><strong class="command">beta</strong><code class="code docutils literal notranslate"><span class="pre">(a,</span> <span class="pre">b)</span></code> for <span class="math notranslate nohighlight">\(a,b&gt;0\)</span> yields
<span class="math notranslate nohighlight">\(B(a, b) = \frac{\Gamma(a) \Gamma(b)}{\Gamma(a+b)} = \int_0^1 t^{a-1} (1-t)^{b-1}\,dt\)</span>.</p></li>
</ul>
<p>Why do we have <strong class="command">beta</strong> if it is merely a mix of <strong class="command">gamma</strong>s?
A specific, tailored function should be faster and more precise
than its DIY version; its underlying implementation
does not have to involve any calls to <strong class="command">gamma</strong> at all.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">beta</span><span class="p">(</span><span class="m">0.25</span><span class="p">,</span><span class="w"> </span><span class="m">250</span><span class="p">)</span><span class="w">  </span><span class="c1"># okay</span>
<span class="c1">## [1] 0.91213</span>
<span class="nf">gamma</span><span class="p">(</span><span class="m">0.25</span><span class="p">)</span><span class="o">*</span><span class="nf">gamma</span><span class="p">(</span><span class="m">250</span><span class="p">)</span><span class="o">/</span><span class="nf">gamma</span><span class="p">(</span><span class="m">250.25</span><span class="p">)</span><span class="w">  </span><span class="c1"># not okay</span>
<span class="c1">## [1] NaN</span>
</pre></div>
</div>
<p>The <span class="math notranslate nohighlight">\(\Gamma\)</span> function grows so rapidly that already <code class="docutils literal notranslate"><span class="pre">gamma(172)</span></code>
yields <code class="docutils literal notranslate"><span class="pre">Inf</span></code>. It is due to the fact that a computer’s arithmetic
is not infinitely precise; compare <a class="reference internal" href="130-logical.html#sec-fp"><span class="std std-numref">Section 3.2.3</span></a>.</p>
<p>Special functions are plentiful; see the open-access <span id="id11">[<a class="reference internal" href="999-bibliography.html#id57" title="Olver, F.W.J. and et al. (2021).  NIST Digital Library of Mathematical Functions. NIST. URL: https://dlmf.nist.gov/.">43</a>]</span>
for one of the most definitive references
(and also <span id="id12">[<a class="reference internal" href="999-bibliography.html#id56" title="Abramowitz, M. and Stegun, I.A. (1972).  Handbook of Mathematical Functions with Formulas, Graphs, and Mathematical Tables. Dover. URL: http://people.math.sfu.ca/~cbm/aands/.">2</a>]</span> for its predecessor).
R package <strong class="program">gsl</strong> <span id="id13">[<a class="reference internal" href="999-bibliography.html#id30" title="Hankin, R.K.S. (2006).  Special functions in R: Introducing the gsl package. R News, 6:24–26. URL: https://cran.r-project.org/web/packages/gsl/vignettes/gslpaper.pdf.">32</a>]</span> provides a vectorised interface
to the famous GNU GSL <span id="id14">[<a class="reference internal" href="999-bibliography.html#id29" title="Galassi, M., Theiler, J., and et al. (2021).  GNU Scientific Library Reference Manual. URL: https://www.gnu.org/software/gsl/.">27</a>]</span> library, which implements
many of them.</p>
<div class="proof proof-type-exercise" id="id26">

    <div class="proof-title">
        <span class="proof-type">Exercise 2.6</span>
        
    </div><div class="proof-content">
<p>The Pochhammer symbol, <span class="math notranslate nohighlight">\((a)_x = \Gamma(a+x)/\Gamma(a)\)</span>,
can be computed via a call to
<strong class="program">gsl</strong><code class="code docutils literal notranslate"><span class="pre">::</span></code><strong class="command">poch</strong><code class="code docutils literal notranslate"><span class="pre">(a,</span> <span class="pre">x)</span></code>
(i.e., the <strong class="command">poch</strong> function from the <strong class="program">gsl</strong> package;
see <a class="reference internal" href="170-function.html#sec-packages"><span class="std std-numref">Section 7.3.1</span></a>):</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># call install.packages(&quot;gsl&quot;) first</span>
<span class="nf">library</span><span class="p">(</span><span class="s">&quot;gsl&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1"># load the package</span>
<span class="nf">poch</span><span class="p">(</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="o">:</span><span class="m">6</span><span class="p">)</span><span class="w">   </span><span class="c1"># calls gsl_sf_poch() from GNU GSL</span>
<span class="c1">## [1]    1320   17160  240240 3603600</span>
</pre></div>
</div>
<p>Read the documentation of the corresponding <strong class="command">gsl_sf_poch</strong>
function in the GNU GSL manual available
<a class="reference external" href="https://www.gnu.org/software/gsl/doc/html/">here</a>.</p>
<p>And since you are there,
do not hesitate to go through the list of
all the other functions, including those related to statistics,
permutations, combinations, and so forth.</p>
</div></div><p>Many functions also have their logarithm-of versions;
see, e.g., <strong class="command">lgamma</strong> and <strong class="command">lbeta</strong>.
Also, for instance, <strong class="command">dnorm</strong> and <strong class="command">dbeta</strong> has the <code class="docutils literal notranslate"><span class="pre">log</span></code>
parameter. Its classical use case is the (numerical) maximum likelihood
estimation, which involves the sums of the <em>logarithms</em> of densities.</p>
</section>
</section>
<section id="arithmetic-operations">
<h2><span class="section-number">2.4. </span>Arithmetic operations<a class="headerlink" href="#arithmetic-operations" title="Permalink to this heading">#</a></h2>
<section id="vectorised-arithmetic-operators">
<span id="sec-op-arith"></span><h3><span class="section-number">2.4.1. </span>Vectorised arithmetic operators<a class="headerlink" href="#vectorised-arithmetic-operators" title="Permalink to this heading">#</a></h3>
<p>R features the following arithmetic operators:</p>
<ul class="simple">
<li><p>`<strong class="command">+</strong>` (addition)
and `<strong class="command">-</strong>` (subtraction),</p></li>
<li><p>`<strong class="command">*</strong>` (multiplication)
and `<strong class="command">/</strong>` (division),</p></li>
<li><p>`<strong class="command">%/%</strong>` (integer division)
and `<strong class="command">%%</strong>` (modulo, division remainder),</p></li>
<li><p>`<strong class="command">^</strong>` (exponentiation; synonym: `<strong class="command">**</strong>`).</p></li>
</ul>
<p>They are all <em>vectorised</em>: they take two
vectors on input and yield another vector in result.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="m">1000</span><span class="p">)</span>
<span class="c1">## [1]   10  200 3000</span>
</pre></div>
</div>
<p>We note that the multiplication was performed in an <em>elementwise</em>
fashion: the 1st element in the left vector was multiplied
by the <em>corresponding</em> element in the right vector
and the result has been stored in the 1st element of the output,
then the 2nd element in the left… all right, we get the point.</p>
<p>Other operators are vectorised in the same manner:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="m">0</span><span class="o">:</span><span class="m">10</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nf">seq</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0.1</span><span class="p">)</span>
<span class="c1">##  [1]  0.0  1.1  2.2  3.3  4.4  5.5  6.6  7.7  8.8  9.9 11.0</span>
<span class="m">0</span><span class="o">:</span><span class="m">7</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">length.out</span><span class="o">=</span><span class="m">8</span><span class="p">)</span><span class="w">   </span><span class="c1"># division by 3</span>
<span class="c1">## [1] 0.00000 0.33333 0.66667 1.00000 1.33333 1.66667 2.00000 2.33333</span>
<span class="m">0</span><span class="o">:</span><span class="m">7</span><span class="w"> </span><span class="o">%/%</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">length.out</span><span class="o">=</span><span class="m">8</span><span class="p">)</span><span class="w"> </span><span class="c1"># integer division</span>
<span class="c1">## [1] 0 0 0 1 1 1 2 2</span>
<span class="m">0</span><span class="o">:</span><span class="m">7</span><span class="w"> </span><span class="o">%%</span><span class="w"> </span><span class="nf">rep</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">length.out</span><span class="o">=</span><span class="m">8</span><span class="p">)</span><span class="w">  </span><span class="c1"># division remainder</span>
<span class="c1">## [1] 0 1 2 0 1 2 0 1</span>
</pre></div>
</div>
<p>Note that operations involving missing values also yield <code class="docutils literal notranslate"><span class="pre">NA</span></code>s:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="kc">NA_real_</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="kc">NA_real_</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="kc">NA_real_</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="kc">NA_real_</span><span class="p">)</span>
<span class="c1">## [1] NA NA  6 NA</span>
</pre></div>
</div>
</section>
<section id="recycling-rule">
<h3><span class="section-number">2.4.2. </span>Recycling rule<a class="headerlink" href="#recycling-rule" title="Permalink to this heading">#</a></h3>
<p>Some of the above statements can be written more concisely.
When the operands are of different lengths, the shorter one
is <em>recycled</em> (think:
<strong class="command">rep</strong><code class="code docutils literal notranslate"><span class="pre">(y,</span> <span class="pre">length.out=</span></code><strong class="command">length</strong><code class="code docutils literal notranslate"><span class="pre">(x))</span></code>)
as many times as necessary.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="m">0</span><span class="o">:</span><span class="m">7</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">3</span>
<span class="c1">## [1] 0.00000 0.33333 0.66667 1.00000 1.33333 1.66667 2.00000 2.33333</span>
<span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">-1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
<span class="c1">##  [1] -1  2 -3  4 -5  6 -7  8 -9 10</span>
<span class="m">2</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="p">(</span><span class="m">0</span><span class="o">:</span><span class="m">10</span><span class="p">)</span>
<span class="c1">##  [1]    1    2    4    8   16   32   64  128  256  512 1024</span>
</pre></div>
</div>
<p>We call this the <em>recycling rule</em>.</p>
<p>If an operand cannot be recycled in its entirety, a warning<a class="footnote-reference brackets" href="#footwarnrec" id="id15" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a>
is generated, but the output is still available.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">8</span>
<span class="c1">## Warning in c(1, 10, 100) * 1:8: longer object length is not a multiple of</span>
<span class="c1">##     shorter object length</span>
<span class="c1">## [1]   1  20 300   4  50 600   7  80</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some functions are also deeply vectorised, i.e., with respect to multiple
arguments. For example,</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">runif</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w"> </span><span class="m">30</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">11</span><span class="p">,</span><span class="w"> </span><span class="m">22</span><span class="p">,</span><span class="w"> </span><span class="m">33</span><span class="p">))</span>
<span class="c1">## [1] 10.288 21.577 31.227</span>
</pre></div>
</div>
<p>generates three random numbers uniformly distributed
over the intervals <span class="math notranslate nohighlight">\((10, 11)\)</span>, <span class="math notranslate nohighlight">\((20, 22)\)</span>, and <span class="math notranslate nohighlight">\((30, 33)\)</span>, respectively.</p>
<p>Also, <strong class="command">pmin</strong> and <strong class="command">pmax</strong> return the <em>parallel</em> minimum
and maximum of the corresponding elements of the input vectors:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">pmin</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">))</span>
<span class="c1">## [1] 1 2 3 1</span>
<span class="nf">pmin</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">)</span>
<span class="c1">## [1] 1 2 3 3 3</span>
<span class="nf">pmax</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="nf">pmin</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0.25</span><span class="p">,</span><span class="w"> </span><span class="m">-2</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">-0.5</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">1.3</span><span class="p">,</span><span class="w"> </span><span class="m">0.99</span><span class="p">)))</span><span class="w">  </span><span class="c1"># clipping to [0, 1]</span>
<span class="c1">## [1] 0.25 0.00 1.00 0.00 0.00 1.00 0.99</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Vectorisation and the recycling rule are perhaps most useful
when applying binary operators on sequences of identical lengths
or when performing vector-scalar (i.e., a sequence vs a single value)
operations. However, there is much more:
schemes like “every <em>k</em>-th element” appear in
Taylor series expansions (multiply by <strong class="command">c</strong><code class="code docutils literal notranslate"><span class="pre">(-1,</span> <span class="pre">1)</span></code>),
<em>k</em>-fold cross validation, etc.;
see also <a class="reference internal" href="230-matrix.html#sec-recycling-rule-revisited"><span class="std std-numref">Section 11.3.4</span></a> for
use cases in matrix/tensor processing.</p>
</div>
</section>
<section id="operator-precedence">
<span id="sec-precedence-numeric"></span><h3><span class="section-number">2.4.3. </span>Operator precedence<a class="headerlink" href="#operator-precedence" title="Permalink to this heading">#</a></h3>
<p>Apart from the seven binary arithmetic operators,
other noteworthy, already mentioned  ones include:
the unary `<strong class="command">-</strong>` (change of sign),
`<strong class="command">:</strong>` (sequence generation),
and `<strong class="command">&lt;-</strong>` (assignment).</p>
<p>Expressions involving multiple operations need a set of rules
governing the order of computations (unless we enforce it
using round brackets). We have said that “<code class="docutils literal notranslate"><span class="pre">-1:10</span></code>”
means “<code class="docutils literal notranslate"><span class="pre">(-1):10</span></code>” rather than “<code class="docutils literal notranslate"><span class="pre">-(1:10)</span></code>”.
But what about, say, “<code class="docutils literal notranslate"><span class="pre">1+1+1+1+1*0</span></code>” or “<code class="docutils literal notranslate"><span class="pre">3*2^0:5+10</span></code>”?</p>
<p>Let us list the aforementioned operators in their order of precedence,
from the least to the most binding (see also <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;Syntax&quot;)</span></code>):</p>
<ol class="arabic simple">
<li><p>`<strong class="command">&lt;-</strong>` (right-to-left),</p></li>
<li><p>`<strong class="command">+</strong>` and `<strong class="command">-</strong>`,</p></li>
<li><p>`<strong class="command">*</strong>` and `<strong class="command">/</strong>`,</p></li>
<li><p>`<strong class="command">%%</strong>` and `<strong class="command">%/%</strong>`,</p></li>
<li><p>`<strong class="command">:</strong>`,</p></li>
<li><p>`<strong class="command">+</strong>` and `<strong class="command">-</strong>` (unary),</p></li>
<li><p>`<strong class="command">^</strong>` (right-to-left).</p></li>
</ol>
<p>Hence, “<code class="docutils literal notranslate"><span class="pre">-2^2/3+3*4</span></code>” means “<code class="docutils literal notranslate"><span class="pre">((-(2^2))/3)+(3*4)</span></code>” and not, for example,
<code class="docutils literal notranslate"><span class="pre">-((2^(2/(3+3)))*4)</span></code>.</p>
<p>Note that `<strong class="command">+</strong>` and `<strong class="command">-</strong>`,
`<strong class="command">*</strong>` and `<strong class="command">/</strong>`,
as well as `<strong class="command">%%</strong>` and `<strong class="command">%/%</strong>`
have the same priority. Expressions involving a series of
operations in the same group,
are evaluated left-to-right, with the exception of `<strong class="command">^</strong>`
and `<strong class="command">&lt;-</strong>`,
which are performed from right to left.</p>
<p>Therefore:</p>
<ul class="simple">
<li><p>“<code class="docutils literal notranslate"><span class="pre">2*3/4*5</span></code>” is equivalent to “<code class="docutils literal notranslate"><span class="pre">((2*3)/4)*5</span></code>”,</p></li>
<li><p>“<code class="docutils literal notranslate"><span class="pre">2^3^4</span></code>” is the same as “<code class="docutils literal notranslate"><span class="pre">2^(3^4)</span></code>” (which, mathematically,
we would write as <span class="math notranslate nohighlight">\(2^{3^4}=2^{81}\)</span>),</p></li>
<li><p>“<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&lt;-</span> <span class="pre">y</span> <span class="pre">&lt;-</span> <span class="pre">4*3%%8/2</span></code>” binds both <code class="docutils literal notranslate"><span class="pre">y</span></code> and <code class="docutils literal notranslate"><span class="pre">x</span></code> with <code class="docutils literal notranslate"><span class="pre">6</span></code>
and not <code class="docutils literal notranslate"><span class="pre">x</span></code> with the previous value of <code class="docutils literal notranslate"><span class="pre">y</span></code>.</p></li>
</ul>
<p>And let us remember: when in doubt, we can always
bracket a subexpression to make sure it is executed
in the intended order (which can also increase readability of the code).</p>
</section>
<section id="accumulating">
<h3><span class="section-number">2.4.4. </span>Accumulating<a class="headerlink" href="#accumulating" title="Permalink to this heading">#</a></h3>
<p>The `<strong class="command">+</strong>` and `<strong class="command">*</strong>` operators
as well as the <strong class="command">pmin</strong> and <strong class="command">pmax</strong> functions
implement elementwise operations that are applied on the corresponding
elements taken from two given vectors:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\begin{split}
\left(
\begin{array}{c}
x_1 \\
x_2 \\
x_3 \\
\vdots \\
x_n
\end{array}
\right)
+
\left(
\begin{array}{c}
y_1 \\
y_2 \\
y_3 \\
\vdots \\
y_n
\end{array}
\right)
=
\left(
\begin{array}{c}
x_1+y_1 \\
x_2+y_2 \\
x_3+y_3 \\
\vdots \\
x_n+y_n
\end{array}
\right).
\end{split}\]</div>
</div>
<p>However, we can also scan through all the values
in a <em>single</em> vector and combine the successive elements that we inspect
using the corresponding operation:</p>
<ul class="simple">
<li><p><strong class="command">cumsum</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code> gives the cumulative sum of the elements in a vector,</p></li>
<li><p><strong class="command">cumprod</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code> computes the cumulative product,</p></li>
<li><p><strong class="command">cummin</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code> yields the cumulative minimum,</p></li>
<li><p><strong class="command">cummax</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code> generates the cumulative maximum.</p></li>
</ul>
<p>The <em>i</em>-th element in the output vector will consist of
the sum/product/min/max of the first <em>i</em> inputs:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\begin{split}
\mathrm{cumsum}\left(
\begin{array}{c}
x_1 \\
x_2 \\
x_3 \\
\vdots \\
x_n
\end{array}
\right)
=
\left(
\begin{array}{l}
x_1 \\
x_1+x_2 \\
x_1+x_2+x_3 \\
\ \vdots\qquad\qquad\quad\ddots  \\
x_1+x_2+x_3+\dots+x_n
\end{array}
\right).
\end{split}\]</div>
</div>
<p>For example:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">cumsum</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">8</span><span class="p">)</span>
<span class="c1">## [1]  1  3  6 10 15 21 28 36</span>
<span class="nf">cumprod</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">8</span><span class="p">)</span>
<span class="c1">## [1]     1     2     6    24   120   720  5040 40320</span>
<span class="nf">cummin</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">))</span>
<span class="c1">## [1] 3 2 2 2 1 1 0</span>
<span class="nf">cummax</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">))</span>
<span class="c1">## [1] 3 3 4 5 5 6 6</span>
</pre></div>
</div>
<p>If we are interested only in the last cumulant, summarising
all the inputs, we have the following
functions at our disposal:</p>
<ul class="simple">
<li><p><strong class="command">sum</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code> computes the sum of elements in a vector,
<span class="math notranslate nohighlight">\(\sum_{i=1}^n x_i=x_1+x_2+\cdots+x_n\)</span>,</p></li>
<li><p><strong class="command">prod</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code> outputs the product of all elements,
<span class="math notranslate nohighlight">\(\prod_{i=1}^n x_i=x_1 x_2 \cdots x_n\)</span>,</p></li>
<li><p><strong class="command">min</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code> computes the minimum,</p></li>
<li><p><strong class="command">max</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code> reckons the greatest value.</p></li>
</ul>
<p>For example:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">sum</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">8</span><span class="p">)</span>
<span class="c1">## [1] 36</span>
<span class="nf">prod</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">8</span><span class="p">)</span>
<span class="c1">## [1] 40320</span>
<span class="nf">min</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">))</span>
<span class="c1">## [1] 0</span>
<span class="nf">max</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">))</span>
<span class="c1">## [1] 6</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In <a class="reference internal" href="170-function.html#chap-function"><span class="std std-numref">Chapter 7</span></a>, we will discuss the <strong class="command">Reduce</strong> function,
which generalises the above by allowing any binary operation
to be propagated over a given vector.</p>
</div>
<div class="proof proof-type-example" id="id27">

    <div class="proof-title">
        <span class="proof-type">Example 2.7</span>
        
    </div><div class="proof-content">
<p><strong class="command">diff</strong> can be considered an inverse to <strong class="command">cumsum</strong>: it computes
the iterative difference. Namely, it subtracts the first two elements,
then the 2nd from the 3rd one, the 3rd from the 4th, and so on.
In other words, <strong class="command">diff</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code> gives <span class="math notranslate nohighlight">\(\boldsymbol{y}\)</span> such that <span class="math notranslate nohighlight">\(y_i=x_{i+1}-x_i\)</span>.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">-2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">15</span><span class="p">)</span>
<span class="nf">diff</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">## [1]  5  3 -4 13</span>
<span class="nf">cumsum</span><span class="p">(</span><span class="nf">diff</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="c1">## [1]  5  8  4 17</span>
<span class="nf">cumsum</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">-2</span><span class="p">,</span><span class="w"> </span><span class="nf">diff</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span><span class="w">  </span><span class="c1"># recreates x</span>
<span class="c1">## [1] -2  3  6  2 15</span>
</pre></div>
</div>
<p>Thanks to <strong class="command">diff</strong>, we can compute the daily changes
to the EUR/AUD forex rates; see <a class="reference internal" href="#fig-euraud-diff"><span class="std std-numref">Figure 2.4</span></a>.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">aud</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">scan</span><span class="p">(</span><span class="nf">paste0</span><span class="p">(</span><span class="s">&quot;https://github.com/gagolews/teaching-data/raw/&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;master/marek/euraud-20200101-20200630.csv&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">comment.char</span><span class="o">=</span><span class="s">&quot;#&quot;</span><span class="p">)</span>
<span class="n">aud_all</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">na.omit</span><span class="p">(</span><span class="n">aud</span><span class="p">)</span><span class="w">  </span><span class="c1"># remove all missing values</span>
<span class="nf">plot</span><span class="p">(</span><span class="nf">diff</span><span class="p">(</span><span class="n">aud_all</span><span class="p">),</span><span class="w"> </span><span class="n">type</span><span class="o">=</span><span class="s">&quot;s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ylab</span><span class="o">=</span><span class="s">&quot;Daily change [EUR/AUD]&quot;</span><span class="p">)</span>
<span class="nf">abline</span><span class="p">(</span><span class="n">h</span><span class="o">=</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">lty</span><span class="o">=</span><span class="s">&quot;dotted&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1"># draw a horizontal line at y=0</span>
</pre></div>
</div>
<figure class="align-default" id="id28">
<span id="fig-euraud-diff"></span><img alt="../_images/euraud-diff-1.png" src="../_images/euraud-diff-1.png" />
<figcaption>
<p><span class="caption-number">Figure 2.4 </span><span class="caption-text">Iterative differences of the exchange rates (non-missing values only)</span><a class="headerlink" href="#id28" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</div></div></section>
<section id="aggregating">
<span id="sec-numeric-aggregation"></span><h3><span class="section-number">2.4.5. </span>Aggregating<a class="headerlink" href="#aggregating" title="Permalink to this heading">#</a></h3>
<p>The above functions form the basis for some popular summary
statistics<a class="footnote-reference brackets" href="#footstats" id="id16" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a> (sample aggregates), such as:</p>
<ul class="simple">
<li><p><strong class="command">mean</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code> gives the arithmetic mean,
<strong class="command">sum</strong><code class="code docutils literal notranslate"><span class="pre">(x)/</span></code><strong class="command">length</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code>,</p></li>
<li><p><strong class="command">var</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code> yields the (unbiased) sample variance,
<strong class="command">sum</strong><code class="code docutils literal notranslate"><span class="pre">((x-</span></code><strong class="command">mean</strong><code class="code docutils literal notranslate"><span class="pre">(x))^2)/(</span></code><strong class="command">length</strong><code class="code docutils literal notranslate"><span class="pre">(x)-1)</span></code>,</p></li>
<li><p><strong class="command">sd</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code> is the standard deviation,
<strong class="command">sqrt</strong><code class="code docutils literal notranslate"><span class="pre">(</span></code><strong class="command">var</strong><code class="code docutils literal notranslate"><span class="pre">(x))</span></code>,</p></li>
<li><p><strong class="command">median</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code> computes the sample median,
i.e., the middle value in the sorted version of <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p></li>
</ul>
<p>For instance<a class="footnote-reference brackets" href="#footquantile" id="id17" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a>:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">runif</span><span class="p">(</span><span class="m">1000</span><span class="p">)</span>
<span class="nf">c</span><span class="p">(</span><span class="nf">min</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="nf">median</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="nf">sd</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="c1">## [1] 0.00046535 0.49727780 0.48995025 0.99940453 0.28748391</span>
</pre></div>
</div>
<div class="proof proof-type-exercise" id="id29">

    <div class="proof-title">
        <span class="proof-type">Exercise 2.8</span>
        
    </div><div class="proof-content">
<p>Let <span class="math notranslate nohighlight">\(\boldsymbol{x}\)</span> be any vector of length <span class="math notranslate nohighlight">\(n\)</span>
with positive elements.
Compute its geometric and harmonic mean,
which are given by, respectively,</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[
\sqrt[n]{\prod_{i=1}^n x_i}=e^{\frac{1}{n} \sum_{i=1}^n \log x_i}
\quad\text{ and }\quad
\frac{n}{\sum_{i=1}^n \frac{1}{x_i}}.
\]</div>
</div>
<p>When solving exercises like this one,
it does not really matter what data you apply these functions on
(see, however, <a class="reference internal" href="210-design.html#sec-testing"><span class="std std-numref">Section 9.3.3.2</span></a> for discussion).
We are being abstract in the sense that
the <span class="math notranslate nohighlight">\(\boldsymbol{x}\)</span> vector can be anything:
from the one that features very accurate financial predictions
that will help minimise inequity and make this world less miserable,
through the data you have been collecting for the last the years
in relation to your definitely-super-important PhD research,
whatever your company asked you to crunch today,
to something related to your hobby project that you enjoy doing after hours.
Therefore, just test the above on something
like “<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&lt;-</span> </code><strong class="command">runif</strong><code class="code docutils literal notranslate"><span class="pre">(10)</span></code>”, and move on.</p>
</div></div><p>All the aforementioned functions return a missing value if any
of the input elements is unavailable.
Luckily, they are equipped with the <code class="docutils literal notranslate"><span class="pre">na.rm</span></code> parameter
on behalf of which we can request the removal of <code class="docutils literal notranslate"><span class="pre">NA</span></code>s.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">aud</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">scan</span><span class="p">(</span><span class="nf">paste0</span><span class="p">(</span><span class="s">&quot;https://github.com/gagolews/teaching-data/raw/&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;master/marek/euraud-20200101-20200630.csv&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">comment.char</span><span class="o">=</span><span class="s">&quot;#&quot;</span><span class="p">)</span>
<span class="nf">c</span><span class="p">(</span><span class="nf">min</span><span class="p">(</span><span class="n">aud</span><span class="p">),</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="n">aud</span><span class="p">),</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="n">aud</span><span class="p">))</span>
<span class="c1">## [1] NA NA NA</span>
<span class="nf">c</span><span class="p">(</span><span class="nf">min</span><span class="p">(</span><span class="n">aud</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">),</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="n">aud</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">),</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="n">aud</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">))</span>
<span class="c1">## [1] 1.6006 1.6775 1.8635</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the documentation, we read that the usage
of some of the aforementioned functions is like
<strong class="command">sum</strong><code class="code docutils literal notranslate"><span class="pre">(...,</span> <span class="pre">na.rm=FALSE)</span></code>.
<strong class="command">prod</strong>, <strong class="command">min</strong>, and <strong class="command">max</strong> are defined similarly.
They accept any number of input vectors, each of them can be of
arbitrary length.
Therefore, <strong class="command">min</strong><code class="code docutils literal notranslate"><span class="pre">(1,</span> <span class="pre">2,</span> <span class="pre">3)</span></code>,
<strong class="command">min</strong><code class="code docutils literal notranslate"><span class="pre">(</span></code><strong class="command">c</strong><code class="code docutils literal notranslate"><span class="pre">(1,</span> <span class="pre">2,</span> <span class="pre">3))</span></code> as well as
<strong class="command">min</strong><code class="code docutils literal notranslate"><span class="pre">(</span></code><strong class="command">c</strong><code class="code docutils literal notranslate"><span class="pre">(1,</span> <span class="pre">2),</span> <span class="pre">3)</span></code>
all return the same result.</p>
<p>However, we can also read that we have
<strong class="command">mean</strong><code class="code docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">trim=0,</span> <span class="pre">na.rm=FALSE,</span> <span class="pre">...)</span></code>.
This time, only one vector can be aggregated and any further arguments
(except <code class="docutils literal notranslate"><span class="pre">trim</span></code> and <code class="docutils literal notranslate"><span class="pre">na.rm</span></code>) are ignored.</p>
<p>The extra flexibility (which we do not have to rely upon, ever)
of the former group is due their being
associative operations: it holds, e.g., <span class="math notranslate nohighlight">\((2+3)+4 = 2+(3+4)\)</span>. Hence,
the operations can be performed in any order, in any groups.</p>
<p>Also note that they are more primitive operations:
it is <strong class="command">mean</strong> that is based on <strong class="command">sum</strong>, not vice versa.</p>
</div>
</section>
</section>
<section id="exercises">
<h2><span class="section-number">2.5. </span>Exercises<a class="headerlink" href="#exercises" title="Permalink to this heading">#</a></h2>
<div class="proof proof-type-exercise" id="id30">

    <div class="proof-title">
        <span class="proof-type">Exercise 2.9</span>
        
    </div><div class="proof-content">
<p>Answer the following questions:</p>
<ul class="simple">
<li><p>What is the meaning of the dot-dot-dot parameter in the definition of the <strong class="command">c</strong> function?</p></li>
<li><p>We say that the <strong class="command">round</strong> function is <em>vectorised</em>; what does that mean?</p></li>
<li><p>What is wrong with a call to
<strong class="command">c</strong><code class="code docutils literal notranslate"><span class="pre">(</span></code><strong class="command">sqrt</strong><code class="code docutils literal notranslate"><span class="pre">(1),</span> </code><strong class="command">sqrt</strong><code class="code docutils literal notranslate"><span class="pre">(2),</span> </code><strong class="command">sqrt</strong><code class="code docutils literal notranslate"><span class="pre">(3))</span></code>?</p></li>
<li><p>What do we mean by saying that multiplication operates element-by-element?</p></li>
<li><p>How does the recycling rule work when applying `<strong class="command">+</strong>`?</p></li>
<li><p>How to (and why) set the seed of the pseudorandom number generator?</p></li>
<li><p>What is the difference between <code class="docutils literal notranslate"><span class="pre">NA_real_</span></code> and <code class="docutils literal notranslate"><span class="pre">NaN</span></code>?</p></li>
<li><p>How are default arguments specified in the manual of, e.g.,
the <strong class="command">round</strong> function?</p></li>
<li><p>Is a call to <strong class="command">rep</strong><code class="code docutils literal notranslate"><span class="pre">(times=4,</span> <span class="pre">x=1:5)</span></code>”
equivalent to <strong class="command">rep</strong><code class="code docutils literal notranslate"><span class="pre">(4,</span> <span class="pre">1:5)</span></code>?</p></li>
<li><p>List a few ways to generate a sequence like
(-1, -0.75, -0.5, …, 0.75, 1).</p></li>
<li><p>Is “<code class="docutils literal notranslate"><span class="pre">-3:5</span></code>” the same as <code class="docutils literal notranslate"><span class="pre">&quot;-(3:5)&quot;</span></code>? What about the
precedence of operators in expressions such as “<code class="docutils literal notranslate"><span class="pre">2^3/4*5^6</span></code>”,
“<code class="docutils literal notranslate"><span class="pre">5*6+4/17%%8</span></code>”, and “<code class="docutils literal notranslate"><span class="pre">1+-2^3:4-1</span></code>”?</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">x</span></code> is a numeric vector of length <span class="math notranslate nohighlight">\(n\)</span> (for some <span class="math notranslate nohighlight">\(n\ge 0\)</span>),
how many values will <strong class="command">sample</strong><code class="code docutils literal notranslate"><span class="pre">(x)</span></code> output?</p></li>
<li><p>Does <strong class="command">scan</strong> support reading directly from compressed archives,
e.g., <code class="docutils literal notranslate"><span class="pre">.csv.gz</span></code> files?</p></li>
</ul>
<p>When in doubt, refer back to the material discussed in this chapter
and/or the R manual.</p>
</div></div><div class="proof proof-type-exercise" id="id31">

    <div class="proof-title">
        <span class="proof-type">Exercise 2.10</span>
        
    </div><div class="proof-content">
<p>The following code generates an example graph of
arcsine and arccosine, whose preparation – thanks to vectorisation –
is quite straightforward.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">seq</span><span class="p">(</span><span class="m">-1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">length.out</span><span class="o">=</span><span class="m">11</span><span class="p">)</span><span class="w">  </span><span class="c1"># increase length.out for a smoother curve</span>
<span class="nf">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="nf">asin</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w">                </span><span class="c1"># asin() computed for 11 points</span>
<span class="w">    </span><span class="n">type</span><span class="o">=</span><span class="s">&quot;l&quot;</span><span class="p">,</span><span class="w">                   </span><span class="c1"># lines</span>
<span class="w">    </span><span class="n">ylim</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="o">-</span><span class="kc">pi</span><span class="o">/</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="kc">pi</span><span class="p">),</span><span class="w">          </span><span class="c1"># y axis limits like c(y_min, y_max)</span>
<span class="w">    </span><span class="n">ylab</span><span class="o">=</span><span class="s">&quot;asin(x), acos(x)&quot;</span><span class="p">)</span><span class="w">    </span><span class="c1"># y axis label</span>
<span class="nf">lines</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="nf">acos</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="n">col</span><span class="o">=</span><span class="s">&quot;red&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">lty</span><span class="o">=</span><span class="s">&quot;dashed&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1"># adds to the current plot</span>
<span class="nf">legend</span><span class="p">(</span><span class="s">&quot;topright&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;asin(x)&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;acos(x)&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="n">lty</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;solid&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;dashed&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">col</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;black&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;red&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">bg</span><span class="o">=</span><span class="s">&quot;white&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Inspired by the above, plot the following functions:
<span class="math notranslate nohighlight">\(|\sin x^2|\)</span>, <span class="math notranslate nohighlight">\(\left|\sin |x|\right|\)</span>, <span class="math notranslate nohighlight">\(\sqrt{\lfloor x\rfloor}\)</span>,
and <span class="math notranslate nohighlight">\(1/(1+e^{-x})\)</span>.
Recall that the documentation of <strong class="command">plot</strong> can be viewed
by calling <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;plot.default&quot;)</span></code>.</p>
</div></div><div class="proof proof-type-exercise" id="id32">

    <div class="proof-title">
        <span class="proof-type">Exercise 2.11</span>
        
    </div><div class="proof-content">
<p>It can be shown that:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[
4 \sum_{i=1}^n \frac{(-1)^{i+1}}{2i-1} = 4\left(
\frac{1}{1} - \frac{1}{3} + \frac{1}{5} - \frac{1}{7} + \cdots
\right)
\]</div>
</div>
<p>slowly converges to <span class="math notranslate nohighlight">\(\pi\)</span> as <span class="math notranslate nohighlight">\(n\)</span> approaches <span class="math notranslate nohighlight">\(\infty\)</span>.
Compute the above for <span class="math notranslate nohighlight">\(n=1{,}000{,}000\)</span> and <span class="math notranslate nohighlight">\(n=1{,}000{,}000{,}000\)</span>
using the vectorised functions and operators
discussed in this chapter, making use of the recycling rule
as much as possible.</p>
</div></div><div class="proof proof-type-exercise" id="id33">

    <div class="proof-title">
        <span class="proof-type">Exercise 2.12</span>
        
    </div><div class="proof-content">
<p>Let <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> be two vectors of identical lengths <span class="math notranslate nohighlight">\(n\)</span>,
say:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">rnorm</span><span class="p">(</span><span class="m">100</span><span class="p">)</span>
<span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">2</span><span class="o">*</span><span class="n">x</span><span class="m">+10</span><span class="o">+</span><span class="nf">rnorm</span><span class="p">(</span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span>
</pre></div>
</div>
<p>Compute the Pearson linear correlation coefficient given by:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[
r = \frac{
    \sum_{i=1}^n \left(x_i-\frac{1}{n}\sum_{j=1}^n x_j \right) \left(y_i-\frac{1}{n}\sum_{j=1}^n y_j \right)
}{
    \sqrt{\sum_{i=1}^n \left(x_i-\frac{1}{n}\sum_{j=1}^n x_j \right)^2}\, \sqrt{\sum_{i=1}^n \left(y_i-\frac{1}{n}\sum_{j=1}^n y_j \right)^2}
}.
\]</div>
</div>
<p>To make sure you have come up with a correct implementation,
compare your result to a call to the built-in <strong class="command">cor</strong><code class="code docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y)</span></code>.</p>
</div></div><div class="proof proof-type-exercise" id="id34">

    <div class="proof-title">
        <span class="proof-type">Exercise 2.13</span>
        
    </div><div class="proof-content">
<p>(*) Look up on the internet an R package that features functions to compute
the 5-day moving (rolling) average and median of a given vector.
Apply them on the EUR/AUD currency exchange data
and plot thus obtained smoothened versions of the time series.</p>
</div></div><div class="proof proof-type-exercise" id="id35">

    <div class="proof-title">
        <span class="proof-type">Exercise 2.14</span>
        
    </div><div class="proof-content">
<p>(**)
Compute the <span class="math notranslate nohighlight">\(k\)</span>-moving average using a call
to <strong class="command">convolve</strong><code class="code docutils literal notranslate"><span class="pre">(...,</span> <span class="pre">type=&quot;filter&quot;)</span></code>.</p>
</div></div><p>In the next chapter we will study operations that involve logical values.</p>
<hr class="footnotes docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="footillusionarycare" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">1</a><span class="fn-bracket">]</span></span>
<p>Some “caring” R users might be tempted to introduce
two new functions now, one for generating (1, 2, 3, 1, 2, 3, …) only
and the other outputting patterns like (1, 1, 1, 2, 2, 2, …).
They would most likely wrap them in a new package and announce that
on Twitter. But this is nothing else than
a multiplication of entities without actual necessity;
we would end up with three functions: the original one, <strong class="command">rep</strong>,
which everyone should know anyway because it is so basic and has been
and will be used everywhere by almost everybody so far,
and the two redundant ones, whose user-friendliness is only illusory.
See also <a class="reference internal" href="210-design.html#chap-design"><span class="std std-numref">Chapter 9</span></a> for discussion on the design
of functions.</p>
</aside>
<aside class="footnote brackets" id="footinteger" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">2</a><span class="fn-bracket">]</span></span>
<p>Also note that certain configurations of
<strong class="command">seq</strong> and its variants might return vectors
of type <code class="docutils literal notranslate"><span class="pre">integer</span></code> instead of <code class="docutils literal notranslate"><span class="pre">double</span></code>, some of them
in a compact (ALTREP) form; see <a class="reference internal" href="160-character.html#sec-integer"><span class="std std-numref">Section 6.4.1</span></a>.</p>
</aside>
<aside class="footnote brackets" id="footenvir" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">3</a><span class="fn-bracket">]</span></span>
<p>Names are bound in environment frames;
see <a class="reference internal" href="330-environment.html#chap-environment"><span class="std std-numref">Chapter 16</span></a>.</p>
</aside>
<aside class="footnote brackets" id="footprintopts" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">4</a><span class="fn-bracket">]</span></span>
<p>There are a couple of settings in place
that control the default behaviour of the <strong class="command">print</strong> function;
see <code class="docutils literal notranslate"><span class="pre">width</span></code>, <code class="docutils literal notranslate"><span class="pre">digits</span></code>, <code class="docutils literal notranslate"><span class="pre">max.print</span></code>, <code class="docutils literal notranslate"><span class="pre">OutDec</span></code>, <code class="docutils literal notranslate"><span class="pre">scipen</span></code>,
etc. in <strong class="command">help</strong><code class="code docutils literal notranslate"><span class="pre">(&quot;options&quot;)</span></code>.</p>
</aside>
<aside class="footnote brackets" id="footwarnrec" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id15">5</a><span class="fn-bracket">]</span></span>
<p>A few built-in functions do not warn at all when incomplete
recycling is performed (e.g., <strong class="command">paste</strong>)
or can even give an error (e.g., <strong class="command">as.data.frame.list</strong>).
Consider this inconsistency an annoying bug and hope it will be fixed
in the next decade or so.</p>
</aside>
<aside class="footnote brackets" id="footstats" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id16">6</a><span class="fn-bracket">]</span></span>
<p>Actually, <strong class="command">var</strong> and <strong class="command">median</strong>,
amongst others, are defined by the <strong class="program">stats</strong> package,
but this one is automatically loaded by default, so let us not
make a fuss about it now.</p>
</aside>
<aside class="footnote brackets" id="footquantile" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id17">7</a><span class="fn-bracket">]</span></span>
<p>Note that <strong class="command">min</strong>, <strong class="command">median</strong>,
and <strong class="command">max</strong> is a special case of <strong class="command">quantile</strong>,
which we will discuss much further,
namely, in <a class="reference internal" href="140-list.html#sec-special-attributes"><span class="std std-numref">Section 4.4.3</span></a>.
This is because it returns a named vector.</p>
</aside>
</aside>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="130-logical.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><span class="section-number">3. </span>Logical vectors</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="110-basics.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><span class="section-number">1. </span>Introduction</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
              
              
              Copyright &#169; 2022–2023 by <a href="https://www.gagolewski.com">Marek Gagolewski</a>.
              Some rights reserved. Licensed under <a href='https://creativecommons.org/licenses/by-nc-nd/4.0/'>CC BY-NC-ND 4.0</a>.
              Built with <a href="https://sphinx-doc.org/">Sphinx</a>
              and a customised <a href="https://github.com/pradyunsg/furo">Furo</a> theme.
              Last updated on 2023-04-10T11:45:30+1000.
              This site will never display any ads: it is a non-profit project.
              It does not collect any data.
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            In this chapter
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">2. Numeric vectors</a><ul>
<li><a class="reference internal" href="#creating-numeric-vectors">2.1. Creating numeric vectors</a><ul>
<li><a class="reference internal" href="#numeric-constants">2.1.1. Numeric constants</a></li>
<li><a class="reference internal" href="#concatenating-vectors-with-c">2.1.2. Concatenating vectors with <strong class="command">c</strong></a></li>
<li><a class="reference internal" href="#repeating-entries-with-rep">2.1.3. Repeating entries with <strong class="command">rep</strong></a></li>
<li><a class="reference internal" href="#generating-arithmetic-progressions-with-seq-and">2.1.4. Generating arithmetic progressions with <strong class="command">seq</strong> and `<strong class="command">:</strong>`</a></li>
<li><a class="reference internal" href="#generating-pseudorandom-numbers">2.1.5. Generating pseudorandom numbers</a></li>
<li><a class="reference internal" href="#reading-data-with-scan">2.1.6. Reading data with <strong class="command">scan</strong></a></li>
</ul>
</li>
<li><a class="reference internal" href="#creating-named-objects">2.2. Creating named objects</a></li>
<li><a class="reference internal" href="#vectorised-mathematical-functions">2.3. Vectorised mathematical functions</a><ul>
<li><a class="reference internal" href="#abs-and-sqrt">2.3.1. <strong class="command">abs</strong> and <strong class="command">sqrt</strong></a></li>
<li><a class="reference internal" href="#rounding">2.3.2. Rounding</a></li>
<li><a class="reference internal" href="#natural-exponential-function-and-logarithm">2.3.3. Natural exponential function and logarithm</a></li>
<li><a class="reference internal" href="#probability-distributions">2.3.4. Probability distributions (*)</a></li>
<li><a class="reference internal" href="#special-functions">2.3.5. Special functions (*)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#arithmetic-operations">2.4. Arithmetic operations</a><ul>
<li><a class="reference internal" href="#vectorised-arithmetic-operators">2.4.1. Vectorised arithmetic operators</a></li>
<li><a class="reference internal" href="#recycling-rule">2.4.2. Recycling rule</a></li>
<li><a class="reference internal" href="#operator-precedence">2.4.3. Operator precedence</a></li>
<li><a class="reference internal" href="#accumulating">2.4.4. Accumulating</a></li>
<li><a class="reference internal" href="#aggregating">2.4.5. Aggregating</a></li>
</ul>
</li>
<li><a class="reference internal" href="#exercises">2.5. Exercises</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/proof.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>